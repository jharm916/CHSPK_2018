var _main;window.onload=function(){"use strict";(_main=new Main).init(),window.onunload=function(){}};var Main=function(){"use strict";function t(){this.isSoundReady=!1,this.isWorldReady=!1,this.isMoving=!1,this.isFirstTap=!1,this._world=null,this._enterFrameList=[],this._resizeList=[],this._resizeTimer=null,this.isHalf=!1,this._fps=0,this.isFF=!1,this.isLowSpec=!1}return t.prototype.init=function(){this.setUA()},t.prototype.setUAComp=function(){var t;$(window).on("resize",function(){_main.onResize()}),this.isSmall5=!1,"PC"===this._device?t="css/pc.css?v=20180406":"SP"===this._device?window.screen.width>350?t="css/sp.css?v=20180406":(this.isSmall5=!0,t="css/sp_s.css?v=20180406"):"TB"===this._device&&(t="css/tb.css?v=20180406"),this.isFF=!1,"PC"===this._device&&"Firefox"===this._ua.BROWSER&&(this.isFF=!0);var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t);document.getElementById("head");document.getElementsByTagName("head")[0].appendChild(e),e.onload=function(){_main.loadCSSComp()}},t.prototype.loadCSSComp=function(){var t=document.getElementById("first-cover");document.body.removeChild(t),this._conf=new Config,this._sceneMng=new SceneMng,this._sound=new SoundSet,this._spRotate=new SpRotation,this._focus=new FocusCheck,this._loading=new LoadingSet},t.prototype.partsLoadStart=function(){this._parts=new PartsMng,this._parts.firstLoad()},t.prototype.partsLoadComp=function(){this.createWorld()},t.prototype.createWorld=function(){this.gaListSet(),this._howto=new HowtoSet,this._info=new InfoSet,this._control=new ControlMng,this._btnSet=new BtnMainSet,this._ui=new UiSet,this._menu=new MenuSet,this._detail=new DetailSet,this._about=new AboutSet,this._world=new CanvasWorld,this._world.init()},t.prototype.createWorldComp=function(){this.contentsStart()},t.prototype.contentsStart=function(){this._loading.loadComp(),this.animationStart(),this._control.contentsStart(),this._world.contentsStart(),this._btnSet.contentsStart(),this._about.contentsStart(),this._detail._bgGL.contentsStart(),setTimeout(function(){_main.firstView()},200)},t.prototype.firstView=function(){this._sceneMng.firstView(),this._world.firstView()},t.prototype.gotoTop=function(){this._sceneMng.gotoTop(),this._world.gotoTop(),this._btnSet.gotoTop(),this._menu.start()},t.prototype.roomToTop=function(){"top"!==this._sceneMng._status&&"opening"!==this._sceneMng._status&&(this._control.enable(!1),this._btnSet.roomToTop(),this._ui.hideRoom(),this._world.roomToTop(),this._world._finish.waveWhite())},t.prototype.roomToTopFix=function(){this._sceneMng.roomToTopFix(),this._control.enable(!0),this._btnSet.roomToTopFix(),this._world.roomToTopFix()},t.prototype.roomToTopMenuReset=function(){this._world.roomToTopMenuReset(),this._btnSet.roomToTopMenuReset()},t.prototype.topFix=function(){this._howto.show(),this._control.enable(!0)},t.prototype.gotoRoom=function(t){this.isMoving=!0,this._control.enable(!1),this._sceneMng.gotoRoom(t),this._world.gotoRoom(),this._world._finish.waveWhite()},t.prototype.roomFix=function(){_main._world._naviImage.loadThumStart()},t.prototype.loadThumComp=function(){this._world._roomNavi._mTitle.showAttention()},t.prototype.roomActive=function(){this._world.roomStart(),this._btnSet.gotoRoom(),this._ui.showRoom(),this._control.enable(!0),this.isMoving=!1},t.prototype.roomToRoom=function(t){"top"!==this._sceneMng.status&&"opening"!==this._sceneMng.status&&(this._sceneMng.roomToRoom(t),this._ui.hideRoom(),this._world.roomToRoom(),this._btnSet.roomToRoom(),this._control.enable(!1))},t.prototype.selectMenu=function(t,e){this._detail.isOpen&&this._detail.clearFromMenu(),this._about.isOpen&&this._about.clearFromMenu(),-1===t?"top"===this._sceneMng._status||"opening"===this._sceneMng._status||this.roomToTop():("top"===this._sceneMng._status?(this._world._dummy._sphere.selectRoomFromMenu(t),this._btnSet.enterAction(t)):this.roomToRoom(t),null!==e&&_main._detail.showFromMenu(t,e))},t.prototype.addEnterFrame=function(t,e){var i={_target:t,_function:e};this._enterFrameList.push(i)},t.prototype.removeEnterFrame=function(t){this.isFrameLock=!0;for(var e=this._enterFrameList.length,i=-1,s=0;s<e;s++)if(this._enterFrameList[s]._target===t){i=s;break}-1!==i?(this._enterFrameList.splice(i,1),this.isFrameLock=!1):this.isFrameLock=!1},t.prototype.animationStart=function(){void 0!==window.requestAnimationFrame?_main.animationType1():_main.animationType2()},t.prototype.animationType1=function(){this.animationLoop(),this._anim=requestAnimationFrame(function(){_main.animationType1()})},t.prototype.animationType2=function(){this.animationLoop(),this._anim=setTimeout(function(){_main.animationType2b()},20)},t.prototype.animationType2b=function(){_main.animationType2()},t.prototype.animationLoop=function(){if(!this.isFrameLock)if(this.isHalf&&(this._fps++,this._fps>1))this._fps=0;else for(var t=this._enterFrameList.length,e=0;e<t;e++){if(void 0!==this._enterFrameList[e])this._enterFrameList[e]._target[this._enterFrameList[e]._function]()}},t.prototype.setUA=function(){var t=document.createElement("canvas").getContext("experimental-webgl");if(this._ua=new GLOBAL.WebModule.UserAgent,this._device="PC",this._version=0,this._webGL=!!window.WebGLRenderingContext&&!!t,this._ua.USER_AGENT.indexOf("Android")>0&&-1==this._ua.USER_AGENT.indexOf("Mobile")||this._ua.USER_AGENT.indexOf("iPad")>0?this._device="TB":(this._ua.USER_AGENT.indexOf("iPhone")>0&&-1==this._ua.USER_AGENT.indexOf("iPad")||this._ua.USER_AGENT.indexOf("iPod")>0||this._ua.USER_AGENT.indexOf("Android")>0&&this._ua.USER_AGENT.indexOf("Mobile")>0)&&(this._device="SP"),"SP"===this._device){var e=this._ua.OS_VERSION.split(".");this._version=parseInt(e[0]),"iOS"===this._ua.OS?this._version<9?this._webGL=!1:(9===this._version&&(this.isLowSpec=!0),this._webGL=!0):"Android"===this._ua.OS&&(this._version<5?this._webGL=!1:(6===this._version&&(this.isLowSpec=!0),this._webGL=!0))}this._webGL?_main.setUAComp():location.href="old/"},t.prototype.addResize=function(t){this._resizeList.push(t)},t.prototype.removeResize=function(t){var e,i=[];for(e=0;e<this._resizeList.length;e++)this._resizeList[e]!==t&&i.push(this._resizeList[e]);for(this._resizeList=[],e=0;e<i.length;e++)this._resizeList.push(i[e])},t.prototype.onResize=function(){this.onResizeFunc(),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);var t=this;this._resizeTimer=setTimeout(function(){t.onResizeFunc()},1e3)},t.prototype.onResizeFunc=function(){for(var t=0;t<this._resizeList.length;t++)this._resizeList[t].onResize();this._menu&&this._menu.isOpen},t.prototype.gaListSet=function(){this._GAtopList=["BAG & SLG - 繝輔Ο繧｢繧偵∩繧�","SCARVES - 繝輔Ο繧｢繧偵∩繧�","JEWELRY - 繝輔Ο繧｢繧偵∩繧�","WEAR - 繝輔Ο繧｢繧偵∩繧�","LIFESTYLE - 繝輔Ο繧｢繧偵∩繧�","FABRICS - 繝輔Ο繧｢繧偵∩繧�"],this._GAroomList=[["TOTE BAG - 隧ｳ縺励￥縺ｿ繧�","SHOULDER BAG - 隧ｳ縺励￥縺ｿ繧�","WALLET - 隧ｳ縺励￥縺ｿ繧�","CARD HOLDER - 隧ｳ縺励￥縺ｿ繧�","POUCH - 隧ｳ縺励￥縺ｿ繧�","ACCESSORY - 隧ｳ縺励￥縺ｿ繧�"],["SILK SCARF - 隧ｳ縺励￥縺ｿ繧�","STOLE - 隧ｳ縺励￥縺ｿ繧�","PONCHO - 隧ｳ縺励￥縺ｿ繧�","SILK SCARF - 隧ｳ縺励￥縺ｿ繧�","STOLE - 隧ｳ縺励￥縺ｿ繧�","PONCHO - 隧ｳ縺励￥縺ｿ繧�"],["BRACELET - 隧ｳ縺励￥縺ｿ繧�","NECKLACE - 隧ｳ縺励￥縺ｿ繧�","BRACELET - 隧ｳ縺励￥縺ｿ繧�","NECKLACE - 隧ｳ縺励￥縺ｿ繧�","BRACELET - 隧ｳ縺励￥縺ｿ繧�","NECKLACE - 隧ｳ縺励￥縺ｿ繧�"],["WOMENS - 隧ｳ縺励￥縺ｿ繧�","MENS - 隧ｳ縺励￥縺ｿ繧�","WOMENS - 隧ｳ縺励￥縺ｿ繧�","MENS - 隧ｳ縺励￥縺ｿ繧�","WOMENS - 隧ｳ縺励￥縺ｿ繧�","MENS - 隧ｳ縺励￥縺ｿ繧�"],["CERAMIC - 隧ｳ縺励￥縺ｿ繧�","CUSHION & THROW - 隧ｳ縺励￥縺ｿ繧�","KITCHEN ACCESSORIES - 隧ｳ縺励￥縺ｿ繧�","STATIONERY - 隧ｳ縺励￥縺ｿ繧�","CUSHION & THROW - 隧ｳ縺励￥縺ｿ繧�","KITCHEN ACCESSORIES - 隧ｳ縺励￥縺ｿ繧�"],["FABRICS - 隧ｳ縺励￥縺ｿ繧�","FABRICS - 隧ｳ縺励￥縺ｿ繧�","FABRICS - 隧ｳ縺励￥縺ｿ繧�","FABRICS - 隧ｳ縺励￥縺ｿ繧�","FABRICS - 隧ｳ縺励￥縺ｿ繧�","FABRICS - 隧ｳ縺励￥縺ｿ繧�"]],this._GAmenuRoomList=["BAG & SLG - menu","SCARVES - menu","JEWELRY - menu","WEAR - menu","LIFESTYLE - menu","FABRICS - menu"],this._GAmenuDetail=[["TOTE BAG - menu","SHOULDER BAG - menu","WALLET - menu","CARD HOLDER - menu","POUCH - menu","ACCESSORY - menu"],["SILK SCARF - menu","STOLE - menu","PONCHO - menu"],["BRACELET - menu","NECKLACE - menu"],["WOMENS - menu","MENS - menu"],["CERAMIC - menu","CUSHION & THROW - menu","KITCHEN ACCESSORIES - menu","STATIONERY - menu"],["FABRICS - menu"]]},t.prototype.sendGA=function(t){gtag("event","click",{event_category:"specialcontent",event_label:t})},t}(),MenuSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this.isOpen=!1,this.isFix=!1,this._btn=document.getElementById("menu-box"),this._world=document.getElementById("world-in"),this._bg=document.getElementById("menu-bg"),this._wrapper=document.getElementById("menu-wrapper"),this._barTop=document.getElementById("menu-bar-top"),this._barBottom=document.getElementById("menu-bar-bottom"),this._base=document.getElementById("menu"),this._group=document.getElementById("menu-group"),this._back=document.getElementById("menu-backtop"),this._list=document.getElementsByClassName("m-image-in");var t=this;this._thumId=[{id:"bag1",cate:0,key:0},{id:"bag2",cate:0,key:1},{id:"bag3",cate:0,key:2},{id:"bag4",cate:0,key:3},{id:"bag5",cate:0,key:4},{id:"bag6",cate:0,key:5},{id:"scarf1",cate:1,key:0},{id:"scarf2",cate:1,key:1},{id:"scarf3",cate:1,key:2},{id:"jewelry1",cate:2,key:0},{id:"jewelry2",cate:2,key:1},{id:"wear1",cate:3,key:0},{id:"wear2",cate:3,key:1},{id:"life1",cate:4,key:0},{id:"life2",cate:4,key:1},{id:"life3",cate:4,key:2},{id:"life4",cate:4,key:3},{id:"fabric1",cate:5,key:0}],this._titleId=[{id:"m-f-bag",key:""},{id:"m-f-scarf",key:""},{id:"m-f-jewelry",key:""},{id:"m-f-wear",key:""},{id:"m-f-life",key:""},{id:"m-f-fabric",key:""}];for(var e=0;e<this._list.length;e++)"PC"===_main._device&&(this._list[e].addEventListener("mouseenter",function(e){t.thumOver(e)}),this._list[e].addEventListener("mouseleave",function(e){t.thumOut(e)})),this._list[e].addEventListener("click",function(e){t.thumClick(e)});var i=document.getElementById("fabric1");for("PC"===_main._device&&(i.addEventListener("mouseenter",function(e){t.thumOver(e)}),i.addEventListener("mouseleave",function(e){t.thumOut(e)})),i.addEventListener("click",function(e){t.thumClick(e)}),this._categoryTitles=document.getElementsByClassName("m-floor"),this._titleLines=document.getElementsByClassName("m-title-line"),e=0;e<this._categoryTitles.length;e++)"PC"===_main._device&&(this._categoryTitles[e].addEventListener("mouseenter",function(e){t.titleOver(e)},!1),this._categoryTitles[e].addEventListener("mouseleave",function(e){t.titleOut(e)},!1)),this._categoryTitles[e].addEventListener("click",function(e){t.titleClick(e)},!1);"PC"===_main._device&&(this._back.addEventListener("mouseenter",function(){TweenMax.killTweensOf(t._back),TweenMax.to(t._back,.2,{opacity:.5})},!1),this._back.addEventListener("mouseleave",function(){TweenMax.killTweensOf(t._back),TweenMax.to(t._back,.2,{opacity:1})},!1)),this._back.addEventListener("click",function(){t.backToTop()},!1)},t.prototype.backToTop=function(){this.isFix&&(this.clearMenu(),"top"!==_main._sceneMng._status&&(TweenMax.set(this._world,{x:"0%"}),_main._control.enable(!1)),_main.selectMenu(-1,null))},t.prototype.thumOver=function(t){if(this.isFix){var e=$("#"+t.target.id);TweenMax.killTweensOf(e),TweenMax.to(e,1.1,{ease:Power3.easeInOut,scale:1.2,opacity:.8})}},t.prototype.thumOut=function(t){if(this.isFix){var e=$("#"+t.target.id);TweenMax.killTweensOf(e),TweenMax.to(e,.4,{scale:1,opacity:1})}},t.prototype.thumClick=function(t){if(this.isFix){this.clearMenu();for(var e,i,s=$(t.target).parent(),a=$(s).attr("id"),n=0;n<this._thumId.length;n++)if(a===this._thumId[n].id){e=this._thumId[n].cate,i=this._thumId[n].key;break}TweenMax.set(this._world,{x:"0%"}),_main.selectMenu(e,i),_main.sendGA(_main._GAmenuDetail[e][i])}},t.prototype.titleOver=function(t){if(this.isFix){for(var e,i=0;i<this._categoryTitles.length;i++)if(this._categoryTitles[i].id===t.target.id){e=this._titleLines[i];break}e&&(TweenMax.killTweensOf(e),TweenMax.to(e,.2,{width:"100px",opacity:1}))}},t.prototype.titleOut=function(t){if(this.isFix){for(var e,i=0;i<this._categoryTitles.length;i++)if(this._categoryTitles[i].id===t.target.id){e=this._titleLines[i];break}e&&(TweenMax.killTweensOf(e),TweenMax.to(e,.2,{width:"10px",opacity:0}))}},t.prototype.titleClick=function(t){if(this.isFix){var e;this.clearMenu();for(var i=0;i<this._titleId.length;i++)if(t.target.id===this._titleId[i].id){e=i;break}TweenMax.set(this._world,{x:"0%"}),_main.selectMenu(e,null),_main.sendGA(_main._GAmenuRoomList[e])}},t.prototype.start=function(){var t=this;TweenMax.set(this._btn,{display:"block"}),TweenMax.to(this._btn,.6,{opacity:1}),TweenMax.set(this._barTop,{x:"0px",y:"0px"}),TweenMax.set(this._barBottom,{x:"0px",y:"0px"}),"PC"===_main._device&&(this._btn.addEventListener("mouseenter",function(){t.mouseOver()}),this._btn.addEventListener("mouseleave",function(){t.mouseOut()})),this._btn.addEventListener("click",function(){t.menuOpen()}),"PC"!==_main._device&&(this._spClose=document.getElementById("m-sp-close"),this._spClose.addEventListener("click",function(){t.isFix&&t.clearMenu()}))},t.prototype.mouseOver=function(){this.isOpen||_main.isMoving||(TweenMax.killTweensOf(this._barTop),TweenMax.killTweensOf(this._barBottom),TweenMax.to(this._barTop,.2,{x:"6px"}),TweenMax.to(this._barBottom,.2,{x:"-6px"}))},t.prototype.mouseOut=function(){this.isOpen||_main.isMoving||(TweenMax.killTweensOf(this._barTop),TweenMax.killTweensOf(this._barBottom),TweenMax.to(this._barTop,.2,{x:"0px"}),TweenMax.to(this._barBottom,.2,{x:"0px"}))},t.prototype.menuOpen=function(){var t=this;if(!_main.isMoving)if(this.isOpen){if(!this.isFix)return;this.clearMenu()}else{var e;TweenMax.killTweensOf(this._barTop),TweenMax.killTweensOf(this._barBottom),this.isOpen=!0,_main._world.pause(!0),_main._world._dummy.renderEnable(!1),TweenMax.to(this._barTop,.2,{x:"0px",y:"4px",rotation:-45}),TweenMax.to(this._barBottom,.2,{x:"0px",y:"-4px",rotation:45}),e="PC"===_main._device?1.2:.9,TweenMax.killTweensOf(this._base),TweenMax.killTweensOf(this._bg),TweenMax.set(this._bg,{display:"block"}),TweenMax.set(this._wrapper,{display:"block",height:String($(this._group).height()+"px")}),TweenMax.set(this._group,{display:"none",opacity:0}),TweenMax.set(this._base,{x:"100%",display:"block"}),TweenMax.set(this._bg,{x:"100%"}),TweenMax.to(this._bg,e,{ease:Power3.easeInOut,x:"0%"}),TweenMax.to(this._base,e,{ease:Power3.easeInOut,x:"0%",onComplete:function(){if("PC"!==_main._device&&(document.body.style.overflowY="visible"),_main.isFF){var e=t;TweenMax.set(t._group,{display:"block",opacity:0,y:"140px"}),TweenMax.to(t._group,1.2,{ease:Power2.easeOut,opacity:1,y:"0px",onComplete:function(){e.animFix()}})}}}),_main.isFF||(TweenMax.set(this._group,{display:"block",opacity:0,x:"30%"}),TweenMax.to(this._group,e,{ease:Power3.easeInOut,opacity:1,x:"0%",delay:.2,onComplete:function(){t.animFix()}})),TweenMax.killTweensOf(this._back),TweenMax.set(this._back,{opacity:0,display:"block"}),TweenMax.to(this._back,.4,{opacity:1}),TweenMax.killTweensOf(this._world),TweenMax.to(this._world,e,{ease:Power3.easeInOut,x:"-50%"}),"PC"===_main._device&&(document.body.style.overflowY="visible")}},t.prototype.animFix=function(){this.isFix=!0,TweenMax.killTweensOf(this._group)},t.prototype.clearMenu=function(){var t=this;TweenMax.killTweensOf(this._group),TweenMax.to(this._group,.2,{opacity:0,onComplete:function(){TweenMax.set(t._group,{display:"none"}),t.resetMenu()}}),TweenMax.killTweensOf(this._back),TweenMax.to(this._back,.2,{opacity:0,onComplete:function(){TweenMax.set(t._back,{display:"none"})}}),TweenMax.killTweensOf(this._barTop),TweenMax.killTweensOf(this._barBottom),TweenMax.to(this._barTop,.2,{x:"0px",y:"0px",rotation:0}),TweenMax.to(this._barBottom,.2,{x:"0px",y:"0px",rotation:0})},t.prototype.resetMenu=function(){var t,e=this;if(TweenMax.set(this._wrapper,{display:"none"}),TweenMax.set(this._base,{display:"none"}),window.scroll(0,0),"PC"===_main._device?document.body.style.overflow="hidden":_main._detail.isOpen||_main._about.isOpen||(document.body.style.overflowY="hidden"),_main._world.pause(!1),_main._detail.isOpen||_main._world._dummy.renderEnable(!0),t="PC"===_main._device?.8:.6,TweenMax.killTweensOf(this._world),TweenMax.to(this._world,t,{ease:Power2.easeInOut,delay:.2,x:"0%"}),TweenMax.killTweensOf(this._bg),TweenMax.to(this._bg,t,{ease:Power2.easeInOut,x:"100%",delay:.2,onComplete:function(){TweenMax.set(e._bg,{display:"none"}),e.isFix=!1,e.isOpen=!1}}),"PC"===_main._device){var i;for(i=0;i<this._titleLines.length;i++)this._titleLines[i].style.opacity=0,this._titleLines[i].style.width="10px";for(i=0;i<this._thumId.length;i++){var s=$("#"+this._thumId[i].id);TweenMax.killTweensOf(s),TweenMax.set(s,{scale:1,opacity:1})}}},t.prototype.showAbout=function(){_main._detail.isOpen&&_main._detail.clearFromMenu(),this.clearMenu(),_main._about.show()},t}(),MoveEffect=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this._renderW=_main._world._renderW,this._renderH=_main._world._renderH,this._wait=0;var t=new THREE.PlaneGeometry(this._renderW,this._renderH,4,2);this._time=0,this._speed=1,this._strength=0,this._size=8,this._alpha=1,this._shader={vertexShader:_main._parts.getShader("shader/moveeffect_vtx.js"),fragmentShader:_main._parts.getShader("shader/moveeffect_frg.js"),uniforms:{texture:{value:null},time:{value:this._time},speed:{value:this._speed},strength:{value:this._strength},size:{value:this._size},alpha:{value:this._alpha}},transparent:!0};var e=new THREE.ShaderMaterial(this._shader);this._mesh=new THREE.Mesh(t,e)},t.prototype.effectStart=function(){this._shader.uniforms.texture.value=null,this._mesh.scale.set(1,1,1),_main._world._render.render(_main._world._post._scene,_main._world._post._cam,this._parent._render),this._shader.uniforms.texture.value=this._parent._render.texture,this._time=0,this._strength=0,this._alpha=1,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,this._shader.uniforms.alpha.value=this._alpha,this._trgScale=2,this._wait=0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this._wait++,this._wait>0&&(_main.removeEnterFrame(this),this._mesh.parent||this._parent._parent._scene.add(this._mesh),_main._world.roomMoveSet(),_main.addEnterFrame(this,"enterFrame2"))},t.prototype.enterFrame2=function(){this._strength=this._strength*_main._conf.s098a+.1*_main._conf.s098b,this._shader.uniforms.strength.value=this._strength,this._time+=.01,this._shader.uniforms.time.value=this._time,this._mesh.scale.x=this._mesh.scale.x*_main._conf.s096a+this._trgScale*_main._conf.s096b,this._mesh.scale.y=this._mesh.scale.x,this._alpha=this._alpha*_main._conf.s095a+0*_main._conf.s095b,this._shader.uniforms.alpha.value=this._alpha,this._alpha<=.005&&(_main.removeEnterFrame(this),this._time=0,this._strength=0,this._alpha=1,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,this._shader.uniforms.alpha.value=this._alpha,this._shader.uniforms.texture.value=null,this._mesh.parent&&this._parent._parent._scene.remove(this._mesh),this._mesh.scale.set(1,1,1))},t}(),NaviImage=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){var t;this.isShow=!1,this._showBC=new Beacon,this.spShowCount=0,this._width=448,this._height=800,this._alpha=0,this._geo=new THREE.PlaneGeometry(this._width,this._height,1,1),t="PC"===_main._device?_main._parts.getTex("image/parts/navi_mask.png"):_main._parts.getTex("image/parts/navi_mask_sp.png"),this._shader={vertexShader:_main._parts.getShader("shader/navithum_vtx.js"),fragmentShader:_main._parts.getShader("shader/navithum_frg.js"),uniforms:{texture:{value:_main._parts.getTex("image/parts/empty.png")},mask:{value:t},noise:{value:_main._world._noise._render.texture},alpha:{value:this._alpha}},transparent:!0},this._mat=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._geo,this._mat),_main._world._scene.add(this._mesh),_main.addResize(this),this.onResize(),this._stage=new NaviImageStage(this)},t.prototype.createRenderComp=function(){this._shader.uniforms.texture.value=this._stage._render.texture},t.prototype.contentsStart=function(){this._mesh.parent&&(this._mesh.visible=!1),this._stage.contentsStart()},t.prototype.loadThumStart=function(){this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._mesh.visible=!0,this._stage.loadThumStart()},t.prototype.roomStart=function(){this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._mesh.visible=!0,this._stage.show(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"showFrame")},t.prototype.showFrame=function(){this._alpha=this._alpha*_main._conf.s095a+1*_main._conf.s095b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-1)<.01&&(_main.removeEnterFrame(this),this._alpha=1,this._shader.uniforms.alpha.value=this._alpha,this.isShow=!0,"SP"===_main._device&&(this._showBC.clear(),this._showBC.set(this,"spShowFrame")))},t.prototype.hide=function(){this.isShow=!1,"SP"===_main._device&&this._showBC.clear(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"hideFrame")},t.prototype.hideFrame=function(){this._alpha=this._alpha*_main._conf.s085a+0*_main._conf.s085b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-0)<.01&&(_main.removeEnterFrame(this),this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._mesh.visible=!1,this._stage.hide())},t.prototype.spShowFrame=function(){_main._control.isDown?(this.spShowCount=0,this._alpha=this._alpha*_main._conf.s092a+0*_main._conf.s092b):(this.spShowCount++,this.spShowCount>=30&&(this.spShowCount=30,this._alpha=this._alpha*_main._conf.s094a+1*_main._conf.s094b)),this._shader.uniforms.alpha.value=this._alpha},t.prototype.visibleFromDetail=function(t){t?this._mesh.parent||_main._world._scene.add(this._mesh):this._mesh.parent&&_main._world._scene.remove(this._mesh)},t.prototype.onResize=function(){var t=window.innerHeight/this._height;this._mesh.scale.x=t,this._mesh.scale.y=t},t}(),NaviImageStage=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this._texList=[],this._pathList=[],this._loadCount=0,this._width=this._parent._width,this._height=this._parent._height,this.isRender=!0,this._bc=new Beacon,this.setViewPort(),this._cam=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam.position.set(0,0,100),this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderTarget(this._width,this._height,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping}),this._thumList=[],this._wait=0,_main.addEnterFrame(this,"waitFrame")},t.prototype.waitFrame=function(){this._wait++,this._wait>1&&(this._wait=0,_main.removeEnterFrame(this),this._parent.createRenderComp(),_main.addEnterFrame(this,"enterFrame"))},t.prototype.enterFrame=function(){_main._world._render.render(this._scene,this._cam,this._render)},t.prototype.contentsStart=function(){this.createThum()},t.prototype.loadThumStart=function(){var t,e=_main._sceneMng.getMList();if(this._texList.length>0)for(t=0;t<this._texList.length;t++){var i=this._texList[t];i.dispose(),i=null}for(this._texList=[],this._pathList=[],this._loadCount=0,t=0;t<e.length;t++)this._pathList[t]=e[t].thum;this.texLoad()},t.prototype.createThum=function(){for(var t=0;t<6;t++){var e={};e.id=t;var i=new NaviImageThum(this,e);this._thumList.push(i)}},t.prototype.traceFrame=function(){for(var t=0;t<this._thumList.length;t++)this._thumList[t].enterFrame()},t.prototype.show=function(){for(var t=_main._world._roomNavi._mList[_main._sceneMng._statusId]._nameList,e=0;e<this._thumList.length;e++)this._thumList[e].show(t[e]._group);this._bc.clear(),this._bc.set(this,"traceFrame")},t.prototype.hide=function(){this._bc.clear();for(var t=0;t<this._thumList.length;t++)this._thumList[t].setTexture(_main._parts.getTex("image/parts/empty.png"));if(this._texList.length>0)for(t=0;t<this._texList.length;t++){var e=this._texList[t];e.dispose(),e=null}this._texList=[]},t.prototype.setViewPort=function(){this._viewPort={};var t=this._width,e=this._height,i=e,s=t/e;this._viewPort={viewSize:i,aspectRatio:s,left:-s*i/2,right:s*i/2,top:i/2,bottom:-i/2,near:0,far:1e4}},t.prototype.texLoad=function(){var t=this;(new THREE.TextureLoader).load(this._pathList[this._loadCount],function(e){t.texLoadEnd(e)})},t.prototype.texLoadEnd=function(t){if(t.needsUpdate=!0,t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,this._texList.push(t),this._loadCount++,this._loadCount>=this._pathList.length){for(var e=0;e<this._thumList.length;e++)this._thumList[e].setTexture(this._texList[e]);_main.loadThumComp()}else this.texLoad()},t}(),NaviImageThum=function(){"use strict";function t(t,e){this._parm=e,this._parent=t,this.init()}return t.prototype.init=function(){this._group=new THREE.Object3D,this._parent._scene.add(this._group),this._width=this._parent._width,this._height=this._parent._height;var t=new THREE.PlaneGeometry(.8*this._width,this._height,1,1);t.vertices[1].x+=225,t.vertices[2].x-=225;var e=new THREE.MeshBasicMaterial({map:_main._parts.getTex("image/thum/navi_thum_bg.png"),transparent:!0,opacity:.9});this._bg=new THREE.Mesh(t,e),this._group.add(this._bg);var i=new THREE.PlaneGeometry(448,this._height,1,1),s=new THREE.MeshBasicMaterial({transparent:!0,map:_main._parts.getTex("image/parts/empty.png"),opacity:.9});this._product=new THREE.Mesh(i,s),this._group.add(this._product),this._trg=null},t.prototype.setTexture=function(t){this._product.material.map=t},t.prototype.show=function(t){this._trg=t,this._group.visible=this._trg.visible,this._bg.position.x=this._trg.position.x+250,this._product.position.x=this._trg.position.x+250},t.prototype.enterFrame=function(){this._group.visible=this._trg.visible,this._bg.position.x=this._bg.position.x*_main._conf.s093a+this._trg.position.x*_main._conf.s093b,this._product.position.x=this._product.position.x*_main._conf.s089a+this._trg.position.x*_main._conf.s089b},t}(),NoiseSet=function(){"use strict";function t(){}return t.prototype.init=function(){this.isRender=!0,this._width=128,this._height=128,this._nSpeed=0,this._speedMin=.01,this._defaultSpeed=.013,this._speedBC=new Beacon,this._sepR=4,this._sepRtrg=0,this._sepBC=new Beacon,this.setViewPort(),this._cam=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam.position.set(0,0,100),this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderTarget(this._width,this._height,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping}),this._count=0;var t=new THREE.PlaneGeometry(this._width,this._height);this._shader={vertexShader:_main._parts.getShader("shader/noise_vtx.js"),fragmentShader:_main._parts.getShader("shader/noise_frg.js"),uniforms:{texture:{value:null},cr:{value:this._sepR},cg:{value:.7},cb:{value:0}}};var e=new THREE.ShaderMaterial(this._shader);this._mesh=new THREE.Mesh(t,e),this._scene.add(this._mesh)},t.prototype.contentsStart=function(){_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){if(this.isRender){_main._world._render.render(this._scene,this._cam,this._render);var t=2*Math.abs(_main._world._dummy._sphere._saR)+this._defaultSpeed;t>=.05&&(t=.05),this._nSpeed=this._nSpeed*_main._conf.s097a+t*_main._conf.s097b,this._count+=this._nSpeed,this._shader.uniforms.cb.value=this._count,this.isRender=!1}else this.isRender=!0},t.prototype.openingEnd=function(){this._speedBC.clear(),this._speedBC.set(this,"openingFrame")},t.prototype.openingFrame=function(){this._defaultSpeed=this._defaultSpeed*_main._conf.s095a+.008*_main._conf.s095b,Math.abs(this._defaultSpeed-.008)<.001&&(this._defaultSpeed=.008,this._speedBC.clear())},t.prototype.aboutStart=function(){this._speedBC.clear(),this._speedBC.set(this,"aboutFrame")},t.prototype.aboutFrame=function(){this._defaultSpeed=this._defaultSpeed*_main._conf.s095a+.018*_main._conf.s095b,Math.abs(this._defaultSpeed-.018)<.001&&(this._defaultSpeed=.018,this._speedBC.clear())},t.prototype.detailOpen=function(t){this._sepBC.clear(),t?("SP"===_main._device?this._sepRtrg=6:this._sepRtrg=6.5,this._defaultSpeed=.026):(this._sepRtrg=4,this._defaultSpeed=this._speedMin),this._sepBC.set(this,"detailFrame")},t.prototype.detailFrame=function(){this._sepR=this._sepR*_main._conf.s094a+this._sepRtrg*_main._conf.s094b,this._shader.uniforms.cr.value=this._sepR,Math.abs(this._sepR-this._sepRtrg)<.01&&(this._sepR=this._sepRtrg,this._shader.uniforms.cr.value=this._sepR,this._sepBC.clear())},t.prototype.waveWhite=function(t){this._defaultSpeed=.3*t+this._speedMin},t.prototype.setViewPort=function(){this._viewPort={};var t=this._width,e=this._height,i=e,s=t/e;this._viewPort={viewSize:i,aspectRatio:s,left:-s*i/2,right:s*i/2,top:i/2,bottom:-i/2,near:0,far:1e4}},t}(),OpeningSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._bgBC=new Beacon,this._camZ=-1700,this._vSpeed=1,this._bgG=new THREE.PlaneGeometry(3248,2e3,2,2),this._bgM=new THREE.MeshBasicMaterial({transparent:!0,opacity:.7,map:_main._parts.getTex("image/opening/cloud.jpg")}),this._bg=new THREE.Mesh(this._bgG,this._bgM),this._bg.position.z=-820+this._camZ-10,_main._world._dummy._scene.add(this._bg);var t=new THREE.PlaneGeometry(3248,866,120,8);(new THREE.ExplodeModifier).modify(t),this._g=(new THREE.BufferGeometry).fromGeometry(t),this._g.verticesNeedUpdate=!0;var e,i=t.faces.length,s=new Float32Array(3*i*3);this._dTurn=0,this._rand=4*Math.random()+2;for(var a=0;a<i;a++){var n=9*a;this._dTurn>1&&(this._rand=8*Math.random()+2,this._dTurn=0);for(var h=0;h<3;h++)s[n+3*h]=this._rand,s[n+3*h+1]=this._rand,s[n+3*h+2]=this._rand;this._dTurn++}this._g.addAttribute("displacement",new THREE.BufferAttribute(s,3)),this._sAlpha=0,this._dispP=0,this._dispSpeed=.001,e="PC"===_main._device&&"Firefox"!==_main._ua.BROWSER?_main._parts.getTex("image/opening/shop.png"):_main._parts.getTex("image/opening/shop_s.png"),this._shopShader={vertexShader:_main._parts.getShader("shader/op_shop_vtx.js"),fragmentShader:_main._parts.getShader("shader/op_shop_frg.js"),uniforms:{texture:{value:e},alpha:{value:this._sAlpha},dispP:{value:this._dispP}},transparent:!0},this._m=new THREE.ShaderMaterial(this._shopShader),this._mesh=new THREE.Mesh(this._g,this._m),this._mesh.position.z=-820+this._camZ,this._mesh.position.y=-850,_main._world._dummy._scene.add(this._mesh),this._particle=new OpParticleSet(this),this._particle.init(),this._wait=0},t.prototype.contentsStart=function(){},t.prototype.firstView=function(){this._cam=_main._world._dummy._cam,this._cam.position.z=this._camZ,_main.removeEnterFrame(this),_main.addEnterFrame(this,"firstFrame")},t.prototype.firstFrame=function(){this._wait++,this._wait>=110&&(this._wait=0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"showFrame"),_main._loading.showEnter())},t.prototype.showFrame=function(){var t=-820+this._camZ;this._mesh.position.y=this._mesh.position.y*_main._conf.s096a+-400*_main._conf.s096b,this._mesh.position.z=this._mesh.position.z*_main._conf.s095a+t*_main._conf.s095b,this._sAlpha=this._sAlpha*_main._conf.s097a+1*_main._conf.s097b,this._shopShader.uniforms.alpha.value=this._sAlpha,Math.abs(this._sAlpha-1)<.001&&(this._mesh.position.y=-400,this._sAlpha=1,this._shopShader.uniforms.alpha.value=this._sAlpha,_main.removeEnterFrame(this))},t.prototype.clickEnter=function(){this._speed=1,this._particle.visible(!1),this._bgBC.clear(),this._bgBC.set(this,"bgHideFrame"),_main._world._cover.openingEnd(),_main._world._finish.changeWhite("strong"),_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this._vSpeed*=.999,this._vSpeed<=.88&&(this._vSpeed=.88);var t=1-this._vSpeed;this._mesh.position.z=this._mesh.position.z*this._vSpeed+(this._cam.position.z-330)*t,this._mesh.position.y=this._mesh.position.y*this._vSpeed+170*t,this._mesh.rotation.x=this._mesh.rotation.x*this._vSpeed+-.1*t,Math.abs(this._mesh.position.z-(this._cam.position.z-330))<3.5&&(this._dispWait=0,this._topWait=0,this.isTop=!1,this._vSpeed=.32,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame2"))},t.prototype.enterFrame2=function(){(this._vSpeed*=1.001,this._vSpeed>=.35&&(this._vSpeed=.35),this._mesh.position.z+=this._vSpeed,this._mesh.position.y+=.6*this._vSpeed,this._dispWait++,this._dispWait>20&&(this._dispSpeed*=1.074,this._dispSpeed>=1.2&&(this._dispSpeed=1.2),this._dispP+=this._dispSpeed,this._shopShader.uniforms.dispP.value=this._dispP),this._mesh.position.z>=-1900)&&(_main.removeEnterFrame(this),this._mesh.parent&&_main._world._dummy._scene.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.material.dispose(),("PC"===_main._device&&"Firefox"!==_main._ua.BROWSER?_main._parts.getTex("image/opening/shop.png"):_main._parts.getTex("image/opening/shop_s.png")).dispose());this._topWait++,this.isTop||this._topWait>=195&&(this._mesh.parent&&_main._world._dummy._scene.remove(this._mesh),this.isTop=!0,_main._world._dummy._particle.visible(!0),_main.gotoTop(),TweenMax.set($("#logo"),{display:"block",opacity:0}),TweenMax.to($("#logo"),.6,{opacity:1}),this._camBC=new Beacon,this._camBC.set(this,"camFrame"),_main._world._finish.changeWhite("normal"),_main._world._noise.openingEnd())},t.prototype.camFrame=function(){this._cam.position.z=this._cam.position.z*_main._conf.s096a+0*_main._conf.s096b,Math.abs(this._cam.position.z)<.01&&(this._cam.position.z=0,this._camBC.clear())},t.prototype.bgHideFrame=function(){this._bgM.opacity=this._bgM.opacity*_main._conf.s098a+0*_main._conf.s098b,Math.abs(this._bgM.opacity-0)<.01&&(this._bgM.opacity=0,this._bg.parent&&(_main._world._dummy._scene.remove(this._bg),this._bg.geometry.dispose(),this._bg.material.map.dispose(),this._bg.material.dispose()),this._bgBC.clear())},t}(),OpParticleSet=function(){"use strict";function t(t){this._parent=t}return t.prototype.init=function(){this._vBC=new Beacon,this._baseAlpha=1,this._countK=0;this._geo=new THREE.BufferGeometry;for(var t=[],e=[],i=[],s=[],a=[],n=[],h=[],o=[],r=0;r<240;r++){t.push(r);Math.random(),Math.PI,Math.random();var _=4e3*Math.random()-2e3,m=2e3*Math.random()-1e3,p=2e3*Math.random()-1e3-1e3;e.push(_),e.push(m),e.push(p),i.push(m),s.push(1-.2*Math.random()),n.push(360*Math.random()*Math.PI/180),h.push(.1*(.5+30*Math.random())),o.push(600*Math.random()-300),a.push(.5+1.5*Math.random())}var l=new Float32Array(t);this._geo.addAttribute("id",new THREE.BufferAttribute(l,1));var d=new Float32Array(e);this._geo.addAttribute("position",new THREE.BufferAttribute(d,3));var c=new Float32Array(s);this._geo.addAttribute("alpha",new THREE.BufferAttribute(c,1));var u=new Float32Array(a);this._geo.addAttribute("dSize",new THREE.BufferAttribute(u,1));var g=new Float32Array(o);this._geo.addAttribute("sinH",new THREE.BufferAttribute(g,1));var w=new Float32Array(n);this._geo.addAttribute("startK",new THREE.BufferAttribute(w,1)),this._speedKList=new Float32Array(h),this._geo.addAttribute("speedK",new THREE.BufferAttribute(this._speedKList,1)),this._pYList=new Float32Array(i),this._geo.addAttribute("pY",new THREE.BufferAttribute(this._pYList,1)),this._shader={vertexShader:_main._parts.getShader("shader/op_particle_vtx.js"),fragmentShader:_main._parts.getShader("shader/op_particle_frg.js"),uniforms:{texture:{value:_main._parts.getTex("image/parts/particle.png")},baseAlpha:{value:this._baseAlpha},countK:{value:this._countK}},transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending},this._mat=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Points(this._geo,this._mat),this._mesh.position.z=-2e3,_main._world._dummy._scene.add(this._mesh),_main.removeEnterFrame(),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this._countK+=.01,this._shader.uniforms.countK.value=this._countK;for(var t=0;t<this._pYList.length;t++)this._pYList[t]+=this._speedKList[t],this._pYList[t]>=1e3&&(this._pYList[t]=-1e3);this._geo.attributes.pY.array=this._pYList,this._geo.attributes.pY.needsUpdate=!0},t.prototype.visible=function(t){this._vBC.clear(),t?this._vBC.set(this,"showFrame"):this._vBC.set(this,"hideFrame")},t.prototype.showFrame=function(){this._baseAlpha=this._baseAlpha*_main._conf.s092a+1*_main._conf.s092b,Math.abs(this._baseAlpha-1)<.01&&(this._vBC.clear(),this._visiAlpha=1,this._shader.uniforms.baseAlpha.value=this._baseAlpha)},t.prototype.hideFrame=function(){this._baseAlpha=this._baseAlpha*_main._conf.s095a+0*_main._conf.s095b,this._shader.uniforms.baseAlpha.value=this._baseAlpha,Math.abs(this._baseAlpha)<.01&&(this._vBC.clear(),this._baseAlpha=0,this._shader.uniforms.baseAlpha.value=this._baseAlpha,_main.removeEnterFrame(),this._mesh.parent&&_main._world._dummy._scene.remove(this._mesh))},t}(),OpRingSet=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this.isRender=!0,this._bc=new Beacon,this._width=648,this._height=172,this.setViewPort(),this._cam=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam.position.set(0,0,100),this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderTarget(this._width,this._height,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping});var t=new THREE.PlaneGeometry(4,30,1,1),e=new THREE.MeshBasicMaterial({color:16777215}),i=new THREE.Mesh(t,e);this._scene.add(i),this.animStart()},t.prototype.contentsStart=function(){},t.prototype.animStart=function(){_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this.isRender&&_main._world._render.render(this._scene,this._cam,this._render)},t.prototype.showRing=function(){this._count=0,this._bc.clear(),this._bc.set(this,"ringFrame")},t.prototype.ringFrame=function(){},t.prototype.setViewPort=function(){this._viewPort={};var t=this._width,e=this._height,i=e,s=t/e;this._viewPort={viewSize:i,aspectRatio:s,left:-s*i/2,right:s*i/2,top:i/2,bottom:-i/2,near:0,far:1e4}},t}(),ParticleSet=function(){"use strict";function t(t){this._parent=t}return t.prototype.init=function(){this._vBC=new Beacon,this._visiAlpha=1,this._countK=0,this._countKSpeed=0,this._countKDirect=0,this._baseAlpha=0;this._geo=new THREE.BufferGeometry;for(var t=[],e=[],i=[],s=[],a=[],n=[],h=[],o=[],r=0;r<150;r++){t.push(r);Math.random(),Math.PI,Math.random();var _=6e3*Math.random()-3e3;a.push(360*Math.random()*Math.PI/180),n.push(2e3*Math.random()+2e3),h.push(.1*(.5+20*Math.random())),o.push(600*Math.random()-300),e.push(0),e.push(_),e.push(0),i.push(1-.2*Math.random()),s.push(.5+2*Math.random())}var m=new Float32Array(t);this._geo.addAttribute("id",new THREE.BufferAttribute(m,1));var p=new Float32Array(e);this._geo.addAttribute("position",new THREE.BufferAttribute(p,3));var l=new Float32Array(i);this._geo.addAttribute("alpha",new THREE.BufferAttribute(l,1));var d=new Float32Array(s);this._geo.addAttribute("dSize",new THREE.BufferAttribute(d,1));var c=new Float32Array(n);this._geo.addAttribute("startR",new THREE.BufferAttribute(c,1));var u=new Float32Array(a);this._geo.addAttribute("startK",new THREE.BufferAttribute(u,1));var g=new Float32Array(h);this._geo.addAttribute("speedK",new THREE.BufferAttribute(g,1));var w=new Float32Array(o);this._geo.addAttribute("sinH",new THREE.BufferAttribute(w,1)),this._shader={vertexShader:_main._parts.getShader("shader/particle_vtx.js"),fragmentShader:_main._parts.getShader("shader/particle_frg.js"),uniforms:{texture:{value:_main._parts.getTex("image/parts/particle.png")},countK:{value:this._countK},baseAlpha:{value:this._baseAlpha}},transparent:!0,depthWrite:!1,depthTest:!1,blending:THREE.AdditiveBlending},this._mat=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Points(this._geo,this._mat),this._parent._scene.add(this._mesh),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this._mesh.rotation.x=this._mesh.rotation.x*_main._conf.s099a+.5*this._parent._sphere._mesh.rotation.x*_main._conf.s099b,this._mesh.position.z=_main._world._dummy._cam.position.z;var t=40*Math.abs(_main._world._dummy._sphere._saR);t=Math.min(t,1.5),this._baseAlpha=this._baseAlpha*_main._conf.s097a+t*_main._conf.s097b,this._shader.uniforms.baseAlpha.value=this._baseAlpha*this._visiAlpha,_main._world._dummy._sphere._saR>.001?this._countKDirect=.003:_main._world._dummy._sphere._saR<-.001&&(this._countKDirect=-.003),this._countKSpeed=this._countKSpeed*_main._conf.s099a+.07*_main._world._dummy._sphere._saR*_main._conf.s099b,this._countK+=this._countKSpeed+this._countKDirect,this._shader.uniforms.countK.value=this._countK},t.prototype.visible=function(t){this._vBC.clear(),t?(this._mesh.visible=!0,this._vBC.set(this,"showFrame")):this._vBC.set(this,"hideFrame")},t.prototype.showFrame=function(){this._visiAlpha=this._visiAlpha*_main._conf.s092a+1*_main._conf.s092b,Math.abs(this._visiAlpha-1)<.01&&(this._vBC.clear(),this._visiAlpha=1)},t.prototype.hideFrame=function(){this._visiAlpha=this._visiAlpha*_main._conf.s092a+0*_main._conf.s092b,Math.abs(this._visiAlpha)<.01&&(this._vBC.clear(),this._visiAlpha=0,this._mesh.visible=!1)},t}(),PartsMng=function(){"use strict";function t(){this._itemCount=0,this._listCount=0,this._imgNum=0,this._imgLoadedNum=0,this._pipeline=4,this._imgMap={},this._texMap={},this._modelMap={},this._shaderMap={},this._jsonMap={},this.init()}return t.prototype.init=function(){if(this._firstItem=[],_main._webGL){var t=["image/category/navi_mark.png","image/opening/cloud.jpg","image/parts/particle.png","image/parts/empty.png","image/parts/pattarn.jpg","image/thum/navi_thum_bg.png"];"PC"===_main._device&&"Firefox"!==_main._ua.BROWSER?t.push("image/opening/shop.png"):t.push("image/opening/shop_s.png"),"PC"===_main._device?(t.push("image/parts/navi_mask.png"),t.push("image/detail/detailBg_pc.png")):(t.push("image/parts/navi_mask_sp.png"),t.push("image/detail/detailBg_sp.png")),"PC"===_main._device||"TB"===_main._device?t.push("image/about/about_bg1.jpg"):t.push("image/about/about_bg1_sp.jpg");var e,i=[];i="PC"===_main._device||"TB"===_main._device?["image/category/firstName.png","image/category/top.png","image/category/top_sab.png","image/category/bags.png","image/category/bags_sab.png","image/category/scarves.png","image/category/scarves_sab.png","image/category/jewelry.png","image/category/jewelry_sab.png","image/category/wear.png","image/category/wear_sab.png","image/category/lifestyle.png","image/category/lifestyle_sab.png","image/category/fabrics.png","image/category/fabrics_sab.png"]:["image/category/firstName.png","image/category/top_sp.png","image/category/top_sp_sab.png","image/category/bags_sp.png","image/category/bags_sp_sab.png","image/category/scarves_sp.png","image/category/scarves_sp_sab.png","image/category/jewelry_sp.png","image/category/jewelry_sp_sab.png","image/category/wear_sp.png","image/category/wear_sp_sab.png","image/category/lifestyle_sp.png","image/category/lifestyle_sp_sab.png","image/category/fabrics_sp.png","image/category/fabrics_sp_sab.png"],e="PC"===_main._device||"TB"===_main._device?["image/sphere/fabric1.jpg","image/sphere/home1.jpg","image/sphere/bag1.jpg","image/sphere/wear1.jpg","image/sphere/scarves1.jpg","image/sphere/jeweliry1.jpg"]:["image/sphere/fabric1_sp.jpg","image/sphere/home1_sp.jpg","image/sphere/bag1_sp.jpg","image/sphere/wear1_sp.jpg","image/sphere/scarves1_sp.jpg","image/sphere/jeweliry1_sp.jpg"];this._firstItem=[{_type:"json",_list:["json/item.json"]},{_type:"texture",_list:e},{_type:"texture",_list:t},{_type:"texture",_list:i},{_type:"shader",_list:["shader/display_vtx.js","shader/display_frg.js","shader/moveeffect_vtx.js","shader/moveeffect_frg.js","shader/noise_vtx.js","shader/noise_frg.js","shader/texture_vtx.js","shader/texture_frg.js","shader/sphere_vtx.js","shader/sphere_frg.js","shader/navithum_vtx.js","shader/navithum_frg.js","shader/particle_vtx.js","shader/particle_frg.js","shader/op_particle_vtx.js","shader/op_particle_frg.js","shader/op_shop_vtx.js","shader/op_shop_frg.js","shader/finish_vtx.js","shader/finish_frg.js","shader/bgPattarn_vtx.js","shader/bgPattarn_frg.js","shader/about_vtx.js","shader/about_frg.js","shader/detailBg_vtx.js","shader/detailBg_frg.js","shader/categoryFirstTitle_vtx.js","shader/categoryFirstTitle_frg.js","shader/categoryTitle_vtx.js","shader/categoryTitle_frg.js"]}]}for(var s in this._partsTotal=0,this._partsLoaded=0,this._firstItem)this._partsTotal+=this._firstItem[s]._list.length},t.prototype.firstLoad=function(){for(var t=0;t<this._pipeline;t++)this.pipelineLoad()},t.prototype.pipelineLoad=function(){var t,e=this;if(!(this._itemCount>=this._firstItem.length)){var i=this._firstItem[this._itemCount],s=i._list[this._listCount],a=this._listCount;if("json"===i._type){var n=s+"?v="+Math.floor(1e4*Math.random());$.getJSON(n,function(t){e.loadJsonEnd(t,i,a)})}else if("texture"===i._type)(t=new THREE.TextureLoader).load(s,function(t){e.loadTextureEnd(t,i,a)});else if("image"===i._type){var h=new Image;h.onload=function(){e.loadImageEnd(this,i,a)},h.src=s}else"model"===i._type?(t=new THREE.JSONLoader).load(s,function(t,s){e.loadModelEnd(t,s,i,a)}):"shader"===i._type&&((t=new XMLHttpRequest).open("GET",s,!0),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.loadShsderEnd(t.responseText,i,a):console.log("shader load failed"))},t.send(null));this._imgNum++,this._listCount++,this._listCount>=i._list.length&&(this._listCount=0,this._itemCount++)}},t.prototype.loadJsonEnd=function(t,e,i){var s=e._list[i];this._jsonMap[s]=t,this.fLoadCompCheck()},t.prototype.loadTextureEnd=function(t,e,i){t.needsUpdate=!0,t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter;var s=e._list[i];this._texMap[s]=t,this.fLoadCompCheck()},t.prototype.loadImageEnd=function(t,e,i){var s=e._list[i];this._imgMap[s]=t,this.fLoadCompCheck()},t.prototype.loadModelEnd=function(t,e,i,s){e&&e.length>0&&(e[0].dispose(),null!=e[0].map&&null!=e[0].map&&e[0].map.dispose(),e=[]);var a=i._list[s];this._modelMap[a]=t,this.fLoadCompCheck()},t.prototype.loadShsderEnd=function(t,e,i){var s=e._list[i];this._shaderMap[s]=t,this.fLoadCompCheck()},t.prototype.fLoadCompCheck=function(){this._partsLoaded++,_main._loading.setPartsNum(this._partsTotal,this._partsLoaded),this.pipelineLoad(),this._imgLoadedNum++,this._imgLoadedNum>=this._imgNum&&_main.partsLoadComp()},t.prototype.getJson=function(t){var e=null;for(var i in this._jsonMap)i.match(t)&&(e=this._jsonMap[i]);return e},t.prototype.getTex=function(t){var e=null;for(var i in this._texMap)i.match(t)&&(e=this._texMap[i]);return e},t.prototype.getModel=function(t){var e=null;for(var i in this._modelMap)i.match(t)&&(e=this._modelMap[i]);return e},t.prototype.getImage=function(t){var e=null;for(var i in this._imgMap)i.match(t)&&(e=this._imgMap[i]);return e},t.prototype.getShader=function(t){var e=null;for(var i in this._shaderMap)i.match(t)&&(e=this._shaderMap[i]);return e},t}(),PostEffectSet=function(){"use strict";function t(){}return t.prototype.init=function(){this._width=_main._world._renderW,this._height=_main._world._renderH,this.setViewPort(),this._cam=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam.position.set(0,0,100),this._cam2=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam2.position.set(0,0,100),this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderTarget(this._width,this._height,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping}),this._display=new DisplaySet(this),this._capScreen=new CapScreen(this),_main._world.setDummyComp(),_main.addEnterFrame(this,"enterFrame")},t.prototype.contentsStart=function(){this._capScreen.contentsStart()},t.prototype.effectStartCapScreen=function(){this._capScreen.effectStart()},t.prototype.effectStartDisplay=function(){this._display.effectStart()},t.prototype.enterFrame=function(){_main._world._render.render(this._scene,this._cam,this._render)},t.prototype.setViewPort=function(){this._viewPort={};var t=this._width,e=this._height,i=e,s=t/e;this._viewPort={viewSize:i,aspectRatio:s,left:-s*i/2,right:s*i/2,top:i/2,bottom:-i/2,near:0,far:1e4}},t}(),RoomImage=function(){"use strict";function t(t){this._parent=t,this._tex=null,this._tex2=null,this.isChange=!0,this.init()}return t.prototype.init=function(){this._texCount=0,this._texList=[_main._parts.getTex("image/sphere/bag2.jpg"),_main._parts.getTex("image/sphere/scarves1.jpg"),_main._parts.getTex("image/sphere/jeweliry1.jpg"),_main._parts.getTex("image/sphere/wear1.jpg"),_main._parts.getTex("image/sphere/home2.jpg"),_main._parts.getTex("image/sphere/fabric2.jpg")],this._geo=new THREE.PlaneGeometry(this._parent._width,this._parent._height,2,2),this._meshList=[];for(var t=0;t<this._texList.length;t++){var e={};e.tex=this._texList[t],e.geo=this._geo;var i=new MeshCont(this,e);this._meshList.push(i)}},t.prototype.contentsStart=function(){for(var t=0;t<this._meshList.length;t++)0===t?this._meshList[t].visible(!0):this._meshList[t].removeMesh()},t.prototype.enterFrame=function(){},t.prototype.effectStart=function(){this._texCount++,this._texCount>=this._texList.length&&(this._texCount=0)},t.prototype.topMoveImage=function(){var t=_main._sceneMng._page;console.log(t);for(var e=0;e<this._meshList.length;e++)e===t?this._meshList[e].visible(!0):this._meshList[e].visible(!1)},t}(),MeshCont=function(){"use strict";function t(t,e){this._parent=t,this._parm=e,this._alpha=0,this._shader={vertexShader:_main._parts.getShader("shader/texture_vtx.js"),fragmentShader:_main._parts.getShader("shader/texture_frg.js"),uniforms:{texture:{value:this._parm.tex},alpha:{value:this._alpha}},transparent:!0},this._mat=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._parm.geo,this._mat),this._parent._parent._scene.add(this._mesh),this._bc=new Beacon,this._trgAlpha=0}return t.prototype.removeMesh=function(){this._mesh.parent&&this._parent._parent._scene.remove(this._mesh)},t.prototype.visible=function(t){this._bc.clear(),t?(this._mesh.parent||this._parent._parent._scene.add(this._mesh),this._trgAlpha=1,this._bc.set(this,"showFrame")):(this._trgAlpha=0,this._bc.set(this,"hideFrame"))},t.prototype.showFrame=function(){this._alpha+=.04,this._shader.uniforms.alpha.value=this._alpha,this._alpha>=1&&this._bc.clear()},t.prototype.hideFrame=function(){this._alpha-=.04,this._shader.uniforms.alpha.value=this._alpha,this._alpha<=0&&(this._bc.clear(),this._mesh.parent&&this._parent._parent._scene.remove(this._mesh))},t}(),RoomNameL=function(){"use strict";function t(t){this._margin=1600,this._parm=t,this._parent=this._parm.parent,this.init()}return t.prototype.init=function(){this._vBC=new Beacon,this._group=new THREE.Object3D,this._group.position.y=this._parm.parent._shiftY,this._parent._group.add(this._group),this._baseScale=1,_main.isSmall5&&(this._baseScale=.85);var t=this._parm.geo;this._alpha=0,this._tShader={vertexShader:_main._parts.getShader("shader/categoryTitle_vtx.js"),fragmentShader:_main._parts.getShader("shader/categoryTitle_frg.js"),uniforms:{texture:{value:this._parm.title},separate:{value:this._parm.separate},myNumY:{value:this._parm.id},alpha:{value:this._alpha}},transparent:!0};var e=new THREE.ShaderMaterial(this._tShader);this._title=new THREE.Mesh(t,e),"TB"===_main._device?(this._title.position.x=-200,this._title.position.y=55):"SP"===_main._device?(this._title.position.x=-60,this._title.position.y=55):(this._title.position.x=-250,this._title.position.y=65),this._group.add(this._title);var i=this._parm.sab_geo;this._sShader={vertexShader:_main._parts.getShader("shader/categoryTitle_vtx.js"),fragmentShader:_main._parts.getShader("shader/categoryTitle_frg.js"),uniforms:{texture:{value:this._parm.sab},separate:{value:this._parm.separate},myNumY:{value:this._parm.id},alpha:{value:this._alpha}},transparent:!0};var s=new THREE.ShaderMaterial(this._sShader);this._sab=new THREE.Mesh(i,s),"SP"===_main._device?(this._sab.position.x=120,this._sab.position.y=-54):"TB"===_main._device?(this._sab.position.x=220,this._sab.position.y=-48):(this._sab.position.x=304,this._sab.position.y=-48),this._group.add(this._sab),this._mark=new THREE.Mesh(this._parm.markG,this._parm.markM),this._group.add(this._mark),this._startK=-60*this._parm.id*Math.PI/180,this._group.scale.set(this._baseScale,this._baseScale,this._baseScale)},t.prototype.enterFrame=function(t){var e=Math.cos(t+this._startK)*this._margin,i=Math.sin(t+this._startK);this._group.visible=i>0,this._group.position.x=this._group.position.x*_main._conf.s070a+e*_main._conf.s070b},t.prototype.show=function(){this._vBC.clear(),this._vBC.set(this,"showFrame")},t.prototype.showFrame=function(){this._alpha=this._alpha*_main._conf.s095a+1*_main._conf.s095b,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-1)<.01&&(this._vBC.clear(),this._alpha=1,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha)},t.prototype.hide=function(){this._vBC.clear(),this._vBC.set(this,"hideFrame")},t.prototype.hideFrame=function(){this._alpha=this._alpha*_main._conf.s092a+0*_main._conf.s092b,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-0)<.01&&(this._vBC.clear(),this._alpha=0,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha)},t.prototype.resetTopMenu=function(){var t=_main._world._dummy._sphere._oldrObjRY,e=Math.cos(t+this._startK)*this._margin,i=Math.sin(t+this._startK);this._group.visible=i>0,this._group.position.x=e,this._group.scale.set(1.3,1.3,1.3),this._vBC.clear(),this._vBC.set(this,"resetTopMenuFrame")},t.prototype.resetTopMenuFrame=function(){this._alpha=this._alpha*_main._conf.s094a+1*_main._conf.s094b,this._group.scale.x=this._group.scale.x*_main._conf.s094a+this._baseScale*_main._conf.s094b,this._group.scale.y=this._group.scale.x,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-1)<.005&&(this._vBC.clear(),this._alpha=1,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,this._group.scale.x=this._group.scale.y=this._baseScale)},t}(),RoomNameM=function(){"use strict";function t(t){this._margin=1600,this._parm=t,this._parent=this._parm.parent,this.init()}return t.prototype.init=function(){this._vBC=new Beacon,this._traceSpeedA=_main._conf.s070a,this._traceSpeedB=_main._conf.s070b,this._group=new THREE.Object3D,this._group.position.y=this._parm.parent._shiftY,this._parent._group.add(this._group),this._baseScale=1,_main.isSmall5&&(this._baseScale=.85);var t=this._parm.geo;this._alpha=0,this._tShader={vertexShader:_main._parts.getShader("shader/categoryTitle_vtx.js"),fragmentShader:_main._parts.getShader("shader/categoryTitle_frg.js"),uniforms:{texture:{value:this._parm.title},separate:{value:this._parm.separate},myNumY:{value:this._parm.id},alpha:{value:this._alpha}},transparent:!0};var e=new THREE.ShaderMaterial(this._tShader);this._title=new THREE.Mesh(t,e),"SP"===_main._device?(this._title.position.x=0,4===this._parent._id?this._title.position.y=78:this._title.position.y=58):(this._title.position.y=58,4===this._parent._id?this._title.position.x=0:this._title.position.x=-70),this._group.add(this._title);var i=this._parm.sab_geo;this._sShader={vertexShader:_main._parts.getShader("shader/categoryTitle_vtx.js"),fragmentShader:_main._parts.getShader("shader/categoryTitle_frg.js"),uniforms:{texture:{value:this._parm.sab},separate:{value:this._parm.separate},myNumY:{value:this._parm.id},alpha:{value:this._alpha}},transparent:!0};var s=new THREE.ShaderMaterial(this._sShader);this._sab=new THREE.Mesh(i,s),"SP"===_main._device?(this._sab.position.x=120,this._sab.position.y=-48):(this._sab.position.x=220,this._sab.position.y=-48),this._group.add(this._sab),this._mark=new THREE.Mesh(this._parm.markG,this._parm.markM),this._group.add(this._mark),"SP"===_main._device&&(this._margin=1500),this._startK=-60*this._parm.id*Math.PI/180,this._group.scale.set(this._baseScale,this._baseScale,this._baseScale)},t.prototype.enterFrame=function(t){var e=Math.cos(t+this._startK)*this._margin,i=Math.sin(t+this._startK);this._group.visible=i>0,this._group.position.x=this._group.position.x*this._traceSpeedA+e*this._traceSpeedB},t.prototype.show=function(){this._traceSpeedA=_main._conf.s091a,this._traceSpeedB=_main._conf.s091b;var t=_main._world._dummy._sphere._rObj.rotation.y-30*Math.PI/180,e=Math.cos(t+this._startK)*this._margin,i=Math.sin(t+this._startK);this._group.visible=i>0,this._group.position.x=e,this._vBC.clear(),this._vBC.set(this,"showFrame")},t.prototype.showFrame=function(){this._alpha=this._alpha*_main._conf.s095a+1*_main._conf.s095b,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-1)<.01&&(this._traceSpeedA=_main._conf.s070a,this._traceSpeedB=_main._conf.s070b,this._vBC.clear(),this._alpha=1,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha)},t.prototype.hide=function(){this._vBC.clear(),this._vBC.set(this,"hideFrame")},t.prototype.hideFrame=function(){this._alpha=this._alpha*_main._conf.s090a+0*_main._conf.s090b,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-0)<.01&&(this._vBC.clear(),this._alpha=0,this._tShader.uniforms.alpha.value=this._alpha,this._sShader.uniforms.alpha.value=this._alpha)},t}(),RoomNavi=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._cL=new RoomNaviL(this),this._mL0=new RoomNaviM(this,0,"bags"),this._mL1=new RoomNaviM(this,1,"scarves"),this._mL2=new RoomNaviM(this,2,"jewelry"),this._mL3=new RoomNaviM(this,3,"wear"),this._mL4=new RoomNaviM(this,4,"home"),this._mL5=new RoomNaviM(this,5,"fabrics"),this._mList=[this._mL0,this._mL1,this._mL2,this._mL3,this._mL4,this._mL5],this._mTitle=new RoomTitleSet(this),this._wait=0,this.isFirstRoom=!0},t.prototype.contentsStart=function(){this._cL.contentsStart();for(var t=0;t<this._mList.length;t++)this._mList[t].contentsStart();this._mTitle.contentsStart()},t.prototype.gotoTop=function(){this._cL.show();for(var t=0;t<this._mList.length;t++)this._mList[t].hide()},t.prototype.roomToTop=function(){for(var t=0;t<this._mList.length;t++)this._mList[t].hide();this.clearAttention(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"roomToTopWaitFrame")},t.prototype.roomToTopWaitFrame=function(){this._wait++,this._wait>=50&&(this._wait=0,_main.removeEnterFrame(this),_main.roomToTopMenuReset())},t.prototype.roomToTopMenuReset=function(){this._cL.resetTopMenu()},t.prototype.roomToTopFix=function(){this._cL.roomToTopFix()},t.prototype.gotoRoom=function(){this._cL.hide(),this._mTitle.show()},t.prototype.roomStart=function(){for(var t=0;t<this._mList.length;t++)t===_main._sceneMng._statusId?this._mList[t].show():this._mList[t].hide()},t.prototype.clearAttention=function(){},t.prototype.getFirstScroll=function(){},t.prototype.roomToRoom=function(){for(var t=0;t<this._mList.length;t++)this._mList[t].hide()},t}(),RoomNaviL=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this.isVisible=!1,this._vBC=new Beacon,this._shiftY=0,"SP"!==_main._device&&(this._shiftY=-28),this._nameList=[],this._group=new THREE.Object3D,_main._world._scene.add(this._group);var t,e,i=new THREE.PlaneGeometry(2e3,1,1,1),s=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:0});this._line=new THREE.Mesh(i,s),this._line.position.y=this._shiftY,this._group.add(this._line),"PC"===_main._device||"TB"===_main._device?(t=new THREE.PlaneGeometry(297,100,1,1),e=new THREE.PlaneGeometry(340,64,1,1)):(t=new THREE.PlaneGeometry(388*.6,81.6,1,1),e=new THREE.PlaneGeometry(256,54,1,1));var a=new THREE.PlaneGeometry(24,24,1,1);this._markM=new THREE.MeshBasicMaterial({transparent:!0,map:_main._parts.getTex("image/category/navi_mark.png"),opacity:0});var n=_main._parts.getTex(_main._sceneMng._texList[0].main);n.wrapS=n.wrapT=THREE.RepeatWrapping;var h=_main._parts.getTex(_main._sceneMng._texList[0].sab);h.wrapS=h.wrapT=THREE.RepeatWrapping;for(var o=0;o<_main._sceneMng._topMenu.length;o++){var r={};r.id=o,r.parent=this,r.separate=_main._sceneMng._topMenu.length,r.geo=t,r.title=n,r.sab_geo=e,r.sab=h,r.markG=a,r.markM=this._markM;var _=new RoomNameL(r);this._nameList.push(_)}},t.prototype.contentsStart=function(){_main._world._scene.remove(this._group)},t.prototype.show=function(){if(!this.isVisible){this.isVisible=!0,this._group.parent||_main._world._scene.add(this._group);for(var t=0;t<this._nameList.length;t++)this._nameList[t].show();this._vBC.clear(),this._vBC.set(this,"showFrame"),_main.removeEnterFrame(),_main.addEnterFrame(this,"enterFrame")}},t.prototype.showFrame=function(){this._line.material.opacity=this._line.material.opacity*_main._conf.s094a+.45*_main._conf.s094b,this._markM.opacity=this._markM.opacity*_main._conf.s094a+1*_main._conf.s094b,Math.abs(this._markM.opacity-1)<=.01&&(this._vBC.clear(),this._markM.opacity=1,this._line.material.opacity=.45)},t.prototype.hide=function(){if(this.isVisible){this.isVisible=!1;for(var t=0;t<this._nameList.length;t++)this._nameList[t].hide();this._vBC.clear(),this._vBC.set(this,"hideFrame"),_main.removeEnterFrame(this)}},t.prototype.hideFrame=function(){this._line.material.opacity=this._line.material.opacity*_main._conf.s094a+0*_main._conf.s094b,this._markM.opacity=this._markM.opacity*_main._conf.s094a+0*_main._conf.s094b,Math.abs(this._markM.opacity-0)<=.01&&(this._vBC.clear(),this._markM.opacity=0,this._line.material.opacity=0,this._group.parent&&_main._world._scene.remove(this._group))},t.prototype.resetTopMenu=function(){if(!this.isVisible){this.isVisible=!0,this._group.parent||_main._world._scene.add(this._group);for(var t=0;t<this._nameList.length;t++)this._nameList[t].resetTopMenu();this._vBC.clear(),this._vBC.set(this,"showFrame")}},t.prototype.roomToTopFix=function(){_main.removeEnterFrame(),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){for(var t=_main._world._dummy._sphere._rObj.rotation.y%(2*Math.PI),e=0;e<this._nameList.length;e++)this._nameList[e].enterFrame(t)},t}(),RoomNaviM=function(){"use strict";function t(t,e,i){this._parent=t,this._id=e,this._type=i,this.init()}return t.prototype.init=function(){this.isVisible=!1,this._vBC=new Beacon,this._shiftY=0,"SP"!==_main._device&&(this._shiftY=-28),this._nameList=[],this._group=new THREE.Object3D,_main._world._scene.add(this._group);var t,e=new THREE.PlaneGeometry(2e3,1,1,1),i=new THREE.MeshBasicMaterial({color:16777215,transparent:!0,opacity:0});if(this._line=new THREE.Mesh(e,i),this._line.position.y=this._shiftY,this._group.add(this._line),"PC"===_main._device||"TB"===_main._device){t=4===this._id?new THREE.PlaneGeometry(614,110,1,1):new THREE.PlaneGeometry(440,110,1,1);var s=new THREE.PlaneGeometry(395,62,1,1)}else t=4===this._id?new THREE.PlaneGeometry(354,118.8,1,1):new THREE.PlaneGeometry(354,144*.6,1,1),s=new THREE.PlaneGeometry(256,54,1,1);var a=new THREE.PlaneGeometry(24,24,1,1);this._markM=new THREE.MeshBasicMaterial({transparent:!0,map:_main._parts.getTex("image/category/navi_mark.png"),opacity:0});var n=_main._parts.getTex(_main._sceneMng._texList[this._id+1].main);n.wrapS=n.wrapT=THREE.RepeatWrapping;var h=_main._parts.getTex(_main._sceneMng._texList[this._id+1].sab);h.wrapS=h.wrapT=THREE.RepeatWrapping;for(var o=0;o<_main._sceneMng._topMenu.length;o++){var r={};r.id=o,r.parent=this,r.separate=_main._sceneMng._topMenu.length,r.geo=t,r.title=n,r.sab_geo=s,r.sab=h,r.markG=a,r.markM=this._markM;var _=new RoomNameM(r);this._nameList.push(_)}},t.prototype.contentsStart=function(){_main._world._scene.remove(this._group)},t.prototype.show=function(){if(!this.isVisible){this.isVisible=!0,this._group.parent||_main._world._scene.add(this._group);for(var t=0;t<this._nameList.length;t++)this._nameList[t].show();this._vBC.clear(),this._vBC.set(this,"showFrame"),_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")}},t.prototype.showFrame=function(){this._line.material.opacity=this._line.material.opacity*_main._conf.s094a+.45*_main._conf.s094b,this._markM.opacity=this._markM.opacity*_main._conf.s094a+1*_main._conf.s094b,Math.abs(this._markM.opacity-1)<=.01&&(this._vBC.clear(),this._markM.opacity=1,this._line.material.opacity=.45)},t.prototype.hide=function(){if(this.isVisible){this.isVisible=!1;for(var t=0;t<this._nameList.length;t++)this._nameList[t].hide();this._vBC.clear(),this._vBC.set(this,"hideFrame"),_main.removeEnterFrame(this)}},t.prototype.hideFrame=function(){this._line.material.opacity=this._line.material.opacity*_main._conf.s090a+0*_main._conf.s090b,this._markM.opacity=this._markM.opacity*_main._conf.s090a+0*_main._conf.s090b,Math.abs(this._markM.opacity-0)<=.01&&(this._vBC.clear(),this._markM.opacity=0,this._line.material.opacity=0,this._group.parent&&_main._world._scene.remove(this._group))},t.prototype.enterFrame=function(){for(var t=_main._world._dummy._sphere._rObj.rotation.y%(2*Math.PI),e=0;e<this._nameList.length;e++)this._nameList[e].enterFrame(t)},t.prototype.onResize=function(){for(var t=0;t<this._nameList.length;t++)this._nameList[t].onResize()},t}(),RoomTitleSet=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this._wait=0,this._loader=$("#sabloader"),this._loaderIn=$("#sabloader-img"),this._alpha=1,this._currentId=0,"PC"===_main._device||"TB"===_main._device?this._g=new THREE.PlaneGeometry(294,72,1,1):this._g=new THREE.PlaneGeometry(294*.7,50.4,1,1),this._shader={vertexShader:_main._parts.getShader("shader/categoryFirstTitle_vtx.js"),fragmentShader:_main._parts.getShader("shader/categoryFirstTitle_frg.js"),uniforms:{texture:{value:_main._parts.getTex("image/category/firstName.png")},separate:{value:6},myNumY:{value:this._currentId},alpha:{value:this._alpha}},transparent:!0},this._m=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._g,this._m),_main._world._scene.add(this._mesh)},t.prototype.contentsStart=function(){this._mesh.parent&&_main._world._scene.remove(this._mesh)},t.prototype.show=function(){this._wait=0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"showWaitFrame")},t.prototype.showAttention=function(){this.hide()},t.prototype.attentionWaitFrame=function(){this._wait++,this._wait>=240&&(_main.removeEnterFrame(this),this._wait=0,_main.roomActive())},t.prototype.showWaitFrame=function(){(this._wait++,this._wait>=50)&&(_main.removeEnterFrame(this),this._wait=0,TweenMax.killTweensOf(this._loader),TweenMax.killTweensOf(this._loaderIn),(new TimelineMax).set(this._loader,{display:"block",opacity:0,scale:2,delay:.4}).to(this._loader,.4,{opacity:1,scale:1}),TweenMax.set(this._loaderIn,{rotation:0}),TweenMax.to(this._loaderIn,.5,{rotation:360,repeat:-1}),this._currentId=_main._sceneMng._statusId,this._shader.uniforms.myNumY.value=this._currentId,this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._mesh.parent||_main._world._scene.add(this._mesh),this._mesh.position.x=0,this._mesh.scale.set(2.5,2.5,2.5),_main.addEnterFrame(this,"showFrame"))},t.prototype.showFrame=function(){this._alpha=this._alpha*_main._conf.s092a+1.02*_main._conf.s092b,this._shader.uniforms.alpha.value=this._alpha,this._mesh.scale.x=this._mesh.scale.x*_main._conf.s092a+1.02*_main._conf.s092b,this._mesh.scale.y=this._mesh.scale.x,this._alpha>.99&&Math.abs(this._mesh.scale.x-1.02)>.01&&_main.removeEnterFrame(this)},t.prototype.hide=function(){_main.removeEnterFrame(this),_main.addEnterFrame(this,"hideFrame");var t=this;TweenMax.to(this._loader,.5,{opacity:0,onComplete:function(){TweenMax.killTweensOf(t._loader),TweenMax.killTweensOf(t._loaderIn),$(t._loader).css({display:"none"})}})},t.prototype.hideFrame=function(){this._alpha=this._alpha*_main._conf.s088a+0*_main._conf.s088b,this._shader.uniforms.alpha.value=this._alpha,this._mesh.scale.x=this._mesh.scale.x*_main._conf.s088a+1.6*_main._conf.s088b,this._mesh.scale.y=this._mesh.scale.x,this._alpha<.01&&(_main.removeEnterFrame(this),this._mesh.parent&&_main._world._scene.remove(this._mesh),_main.roomActive())},t}(),RotateEffect=function(){"use strict";function t(t){this._parent=t,this._bc=new Beacon,this.init()}return t.prototype.init=function(){this.isAction=!1,this._wait=0,this._renderW=_main._world._renderW,this._renderH=_main._world._renderH;var t=new THREE.PlaneGeometry(this._renderW,this._renderH,4,2);this._time=0,this._speed=1,this._strength=0,this._size=8,this._alpha=1,this._th=0,this._tr=0,this._shader={vertexShader:_main._parts.getShader("shader/rotateeffect_vtx.js"),fragmentShader:_main._parts.getShader("shader/rotateeffect_frg.js"),uniforms:{texture:{value:null},time:{value:this._time},speed:{value:this._speed},strength:{value:this._strength},size:{value:this._size},alpha:{value:this._alpha},th:{value:this._th},tr:{value:this._tr}},transparent:!0};var e=new THREE.ShaderMaterial(this._shader);this._mesh=new THREE.Mesh(t,e),this._mesh.visible=!1,this._parent._parent._scene.add(this._mesh)},t.prototype.contentsStart=function(){_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){Math.abs(_main._world._dummy._sphere._saR)/Math.PI*180>.05&&_main._control.isDown&&(this.isAction||(this.isAction=!0,this.effectStart()))},t.prototype.effectStart=function(){this._wait=0,this._shader.uniforms.texture.value=null,_main._world._render.render(_main._world._post._scene,_main._world._post._cam2,this._parent._render),this._shader.uniforms.texture.value=this._parent._render.texture,this._time=0,this._strength=0,this._alpha=.3,this._tr=.5,this._th=0,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,this._shader.uniforms.alpha.value=this._alpha,this._shader.uniforms.th.value=this._th,this._shader.uniforms.tr.value=this._tr,this._mesh.visible=!0,this._bc.clear(),this._bc.set(this,"effectFrame")},t.prototype.effectFrame=function(){this._strength=this._strength*_main._conf.s099a+.04*_main._conf.s099b,this._shader.uniforms.strength.value=this._strength,this._time+=.01,this._shader.uniforms.time.value=this._time,this._th=this._th*_main._conf.s099a+.2*_main._conf.s099b,this._shader.uniforms.th.value=this._th,this._alpha=this._alpha*_main._conf.s096a+0*_main._conf.s096b,this._shader.uniforms.alpha.value=this._alpha,this._alpha<=.01&&(this._bc.clear(),this._time=0,this._strength=0,this._alpha=1,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,this._shader.uniforms.alpha.value=this._alpha,this._shader.uniforms.texture.value=null,this._mesh.visible=!1,this.isAction=!1)},t}(),SceneMng=function(){"use strict";function t(){this.setList(),this._status="",this._statusId=-1,this._idList=null,this._rotateN=0,this._page=0,this._oldPage=this._page,this.isRotate=!0}return t.prototype.next=function(){if(!_main._detail.isOpen&&!_main._menu.isOpen&&this.isRotate){this.isRotate=!1;var t=Math.floor(_main._world._dummy._sphere._rObj.rotation.y/Math.PI*180/60);this._rotateN=t,this._page++,this._page>=this._topMenu.length&&(this._page=0),this.setRotate()}},t.prototype.prev=function(){if(!_main._detail.isOpen&&!_main._menu.isOpen&&this.isRotate){this.isRotate=!1;var t=Math.floor(_main._world._dummy._sphere._rObj.rotation.y/Math.PI*180/60)-2;this._rotateN=t,this._page--,this._page<0&&(this._page=this._topMenu.length-1),this.setRotate()}},t.prototype.setRotate=function(){var t=(60*this._rotateN+90)*Math.PI/180;_main._world._dummy._sphere.rotatePage(t)},t.prototype.setRotateComp=function(){this.isRotate=!0},t.prototype.firstView=function(){this._status="opening"},t.prototype.gotoTop=function(){this._status="top",this._idList=this._topMenu},t.prototype.roomToTopFix=function(){this._page=this._statusId,this._status="top",this._idList=this._topMenu},t.prototype.gotoRoom=function(t){this._status!==this._idList[t].name&&(this._oldPage=this._page,this._statusId=t,this._status=this._idList[t].name,"bags"===this._status?this._idList=this._bagsMenu:"scarves"===this._status?this._idList=this._scarvesMenu:"jewelry"===this._status?this._idList=this._jewelryMenu:"wear"===this._status?this._idList=this._wearMenu:"lifestyle"===this._status?this._idList=this._lifestyleMenu:"fabrics"===this._status&&(this._idList=this._fabricMenu))},t.prototype.roomToRoom=function(t){this._statusId=t,this._statusId>=this._topMenu.length?this._statusId=0:this._statusId<0&&(this._statusId=this._topMenu.length-1),this._status=this._topMenu[this._statusId].name,"bags"===this._status?this._idList=this._bagsMenu:"scarves"===this._status?this._idList=this._scarvesMenu:"jewelry"===this._status?this._idList=this._jewelryMenu:"wear"===this._status?this._idList=this._wearMenu:"lifestyle"===this._status?this._idList=this._lifestyleMenu:"fabrics"===this._status&&(this._idList=this._fabricMenu),this._page=this._statusId},t.prototype.setList=function(){"PC"===_main._device||"TB"===_main._device?this._texList=[{main:"image/category/top.png",sab:"image/category/top_sab.png"},{main:"image/category/bags.png",sab:"image/category/bags_sab.png"},{main:"image/category/scarves.png",sab:"image/category/scarves_sab.png"},{main:"image/category/jewelry.png",sab:"image/category/jewelry_sab.png"},{main:"image/category/wear.png",sab:"image/category/wear_sab.png"},{main:"image/category/lifestyle.png",sab:"image/category/lifestyle_sab.png"},{main:"image/category/fabrics.png",sab:"image/category/fabrics_sab.png"}]:this._texList=[{main:"image/category/top_sp.png",sab:"image/category/top_sp_sab.png"},{main:"image/category/bags_sp.png",sab:"image/category/bags_sp_sab.png"},{main:"image/category/scarves_sp.png",sab:"image/category/scarves_sp_sab.png"},{main:"image/category/jewelry_sp.png",sab:"image/category/jewelry_sp_sab.png"},{main:"image/category/wear_sp.png",sab:"image/category/wear_sp_sab.png"},{main:"image/category/lifestyle_sp.png",sab:"image/category/lifestyle_sp_sab.png"},{main:"image/category/fabrics_sp.png",sab:"image/category/fabrics_sp_sab.png"}],this._topMenu=[{name:"bags",id:0,thum:null,startK:0},{name:"scarves",id:1,thum:null,startK:60},{name:"jewelry",id:2,thum:null,startK:120},{name:"wear",id:3,thum:null,startK:180},{name:"lifestyle",id:4,thum:null,startK:240},{name:"fabrics",id:5,thum:null,startK:300}],this._bagsMenu=[{name:"tote-bags",id:0,thum:"image/thum/tote.png"},{name:"shoulder-bags",id:1,thum:"image/thum/shoulder.png"},{name:"wallets",id:2,thum:"image/thum/wallet.png"},{name:"card-holders",id:3,thum:"image/thum/holder.png"},{name:"pouchs",id:4,thum:"image/thum/pouch.png"},{name:"accessories",id:5,thum:"image/thum/acce.png"}],this._scarvesMenu=[{name:"silk-scarves",id:0,thum:"image/thum/silk_scarf.png"},{name:"stoles",id:1,thum:"image/thum/stole.png"},{name:"ponchos",id:2,thum:"image/thum/poncho.png"},{name:"silk-scarves",id:3,thum:"image/thum/silk_scarf.png"},{name:"stoles",id:4,thum:"image/thum/stole.png"},{name:"ponchos",id:5,thum:"image/thum/poncho.png"}],this._jewelryMenu=[{name:"bracelets",id:0,thum:"image/thum/bracelet.png"},{name:"necklaces",id:1,thum:"image/thum/neckrace.png"},{name:"bracelets",id:2,thum:"image/thum/bracelet.png"},{name:"necklaces",id:3,thum:"image/thum/neckrace.png"},{name:"bracelets",id:4,thum:"image/thum/bracelet.png"},{name:"necklaces",id:5,thum:"image/thum/neckrace.png"}],this._wearMenu=[{name:"women",id:0,thum:"image/thum/womens.png"},{name:"men",id:1,thum:"image/thum/mens.png"},{name:"women",id:2,thum:"image/thum/womens.png"},{name:"men",id:3,thum:"image/thum/mens.png"},{name:"women",id:4,thum:"image/thum/womens.png"},{name:"men",id:5,thum:"image/thum/mens.png"}],this._lifestyleMenu=[{name:"ceramics",id:0,thum:"image/thum/ceramic.png"},{name:"cushions",id:1,thum:"image/thum/cushion.png"},{name:"Kitchen-accessories",id:2,thum:"image/thum/kitchen.png"},{name:"stationery",id:3,thum:"image/thum/stationary.png"},{name:"cushions",id:4,thum:"image/thum/cushion.png"},{name:"Kitchen-accessories",id:5,thum:"image/thum/kitchen.png"}],this._fabricMenu=[{name:"type-a",id:0,thum:"image/thum/fabrics.png"},{name:"type-b",id:1,thum:"image/thum/fabrics.png"},{name:"type-c",id:2,thum:"image/thum/fabrics.png"},{name:"type-a",id:0,thum:"image/thum/fabrics.png"},{name:"type-b",id:1,thum:"image/thum/fabrics.png"},{name:"type-c",id:2,thum:"image/thum/fabrics.png"}],this._indexList=[this._bagsMenu,this._scarvesMenu,this._jewelryMenu,this._wearMenu,this._lifestyleMenu,this._fabricMenu]},t.prototype.getMList=function(){return"top"===this._status&&alert("SceneMng.getMList > top"),this._indexList[this._statusId]},t}(),SoundMng=function(){"use strict";function t(t){this._parent=t,this.isPlay=!1,this.isPause=!1,this._queue=new createjs.LoadQueue,createjs.Sound.alternateExtensions=["mp3"],this._queue.installPlugin(createjs.Sound);var e=this;this._queue.addEventListener("complete",function(t){e.fileLoadComp(t)}),this._queue.addEventListener("progress",function(t){e.fileProgress(t)}),this._inst=null,this.isSound=!1,this._vmax=.2}return t.prototype.loadFile=function(){this.isSound=!0,this._queue.loadManifest([{id:"bgm",src:String("sound/bgm1.mp3")}])},t.prototype.fileLoadComp=function(t){this._parent.soundLoadComp()},t.prototype.fileProgress=function(t){},t.prototype.playBGM=function(){this.isSound&&(this._inst=createjs.Sound.play("bgm",{loop:-1}),this.setVolume(this._vmax),this.isPlay=!0)},t.prototype.pause=function(){this.isSound&&this._inst&&(this.isPause=!0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"hideFrame"))},t.prototype.resume=function(){this._inst&&(this.isPause=!1,this._inst.paused=!1,_main.removeEnterFrame(this),_main.addEnterFrame(this,"showFrame"))},t.prototype.showFrame=function(){this._inst.volume+=.03,this._inst.volume>=this._vmax&&(this._inst.volume=this._vmax,_main.removeEnterFrame(this))},t.prototype.hideFrame=function(){this._inst.volume-=.03,this._inst.volume<=.01&&(this._inst.volume=.01,_main.removeEnterFrame(this),this._inst.paused=!0)},t.prototype.setVolume=function(t){null!=this._inst&&(this._inst.volume=t)},t.prototype.setFocus=function(t){this.isSound&&this._inst&&(this.isPause||(this._inst.paused=!t))},t.prototype.getPosition=function(){var t=-1;return null!=this._inst&&(t=this._inst.getPosition()),t},t.prototype.setPosition=function(t){null!=this._inst&&this._inst.setPosition(t)},t}(),SoundSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){if(this._soundMng=new SoundMng(this),this.isLoad=!1,this.isStart=!1,"PC"===_main._device){this._wrapper=document.getElementById("sound-set"),this._bars=[];var t=$("#sound-bar-set");this._bars=t.children("div"),this.loadFile()}},t.prototype.loadFile=function(){this._soundMng.loadFile()},t.prototype.soundLoadComp=function(){this.isLoad=!0,this.isStart&&(this._soundMng.playBGM(),"PC"===_main._device&&this.showBtn())},t.prototype.startCheck=function(){this.isStart=!0,this.isLoad&&(this._soundMng.playBGM(),"PC"===_main._device&&this.showBtn())},t.prototype.showBtn=function(){TweenMax.set(this._wrapper,{display:"block"}),TweenMax.to(this._wrapper,.4,{opacity:1});var t=this;this._wrapper.addEventListener("click",function(){t.mute()}),this.bAnim(!0)},t.prototype.mute=function(){this._soundMng.isPause?(this._soundMng.resume(),this.bAnim(!0)):(this._soundMng.pause(),this.bAnim(!1))},t.prototype.bAnim=function(t){var e,i=this;if(t){TweenMax.killTweensOf(this._bars[0]);var s=Math.ceil(10*Math.random())+"px";TweenMax.to(this._bars[0],.2,{height:s,onComplete:function(){i.action(i._bars[0])}}),TweenMax.killTweensOf(this._bars[1]);var a=Math.ceil(10*Math.random())+"px";TweenMax.to(this._bars[1],.2,{height:a,onComplete:function(){i.action(i._bars[1])}}),TweenMax.killTweensOf(this._bars[2]);var n=Math.ceil(10*Math.random())+"px";TweenMax.to(this._bars[2],.2,{height:n,onComplete:function(){i.action(i._bars[2])}})}else for(e=0;e<this._bars.length;e++)TweenMax.killTweensOf(this._bars[e]),TweenMax.to(this._bars[e],.2,{height:1})},t.prototype.action=function(t){var e=this;TweenMax.killTweensOf(t);var i=Math.ceil(10*Math.random())+"px";TweenMax.to(t,.2,{height:i,onComplete:function(){e.action(t)}})},t.prototype.setFocus=function(t){this._soundMng&&this._soundMng.setFocus(t)},t}(),SphereSet=function(){"use strict";function t(t){this._parent=t,this._mesh=null}return t.prototype.init=function(){this._tex=new TextureSet(this),this._tex.init(),this.isFirst=!0,this._topOldYM=0,this._topOldYR=0,this._vSpeed=1,this.isMoving=!1,this._oldMeshRY=0,this._oldrObjRY=0,this.isRtoR=!1,this._effectWait=0,this._startK=90*Math.PI/180,this._baseY=this._baseTrgY=this._startK,this._geo=new THREE.SphereGeometry(2e3,40,40),this._mat=this._tex._mat,this._mesh=new THREE.Mesh(this._geo,this._mat),this._mesh.rotation.y=this._startK,this._farZ,"PC"!==_main._device?this.onResize():this._farZ=-4350,this._mesh.position.z=this._farZ-500,this._parent._scene.add(this._mesh),this._rangeXA=15*Math.PI/180,this._rangeXB=15*Math.PI/180,this._swipeSpeedX=0,this._swipeSpeedY=0,"PC"===_main._device?this._easing=.5:this._easing=1.5,this._easingX=0;var t=new THREE.PlaneGeometry(10,10,1,1),e=new THREE.MeshBasicMaterial({color:16711680});this._rObj=new THREE.Mesh(t,e),this._rObj.position.z=0,this._rObj.rotation.y=this._startK,this._rObj.visible=!1,this._parent._scene.add(this._rObj),this._oldR=this._rObj.rotation.y,this._saR=0,this._bc=new Beacon,this._topBC=new Beacon},t.prototype.contentsStart=function(){this._tex.contentsStart(),"PC"!==_main._device&&(_main.addResize(this),this.onResize())},t.prototype.rotatePage=function(t){this._trgR=t,"top"===_main._sceneMng._status&&this._tex.topMoveImage(),"top"!==_main._sceneMng._status&&"opening"!==_main._sceneMng._status&&_main._world._roomNavi.getFirstScroll(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"rotateFrame")},t.prototype.rotateFrame=function(){if(this._rObj.rotation.y=this._rObj.rotation.y*_main._conf.s093a+this._trgR*_main._conf.s093b,"top"===_main._sceneMng._status){var t=3*(this._trgR-90*Math.PI/180)+90*Math.PI/180;this._mesh.rotation.y=this._mesh.rotation.y*_main._conf.s094a+t*_main._conf.s094b}else this._mesh.rotation.y=this._rObj.rotation.y;this._mesh.rotation.x=this._rObj.rotation.x,this._saR=this._rObj.rotation.y-this._oldR,this._oldR=this._rObj.rotation.y,Math.abs(this._rObj.rotation.y-this._trgR)<.15&&!_main._sceneMng.isRotate&&(_main._sceneMng.setRotateComp(),_main._control.wheelComp()),Math.abs(this._rObj.rotation.y-this._trgR)<.001&&(this._swipeSpeedX=0,this._swipeSpeedY=0,this._baseY=this._rObj.rotation.y,this._baseTrgY=this._rObj.rotation.y,this._rObj.rotation.y=this._trgR,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"))},t.prototype.roomToRoom=function(){var t,e;this.isMoving=!0,this.isRtoR=!0,_main.removeEnterFrame(this),this._mesh.rotation.y=this._startK,this._rObj.rotation.y=this._startK,this._swipeSpeedX=0,this._swipeSpeedY=0,this._baseY=this._rObj.rotation.y,this._baseTrgY=this._rObj.rotation.y,this._saR=0,this._oldR=this._rObj.rotation.y,e=3*(t=_main._sceneMng._topMenu[_main._sceneMng._statusId].startK*Math.PI/180),this._oldrObjRY=t+this._startK,this._oldMeshRY=e+this._startK,this._mesh.position.z=-5800,this._tex.effectStart(),this._effectWait=0,this._bc.clear(),this._bc.set(this,"effectWaitFrame")},t.prototype.effectWaitFrame=function(){this._effectSpeed=1,this._effectWait++,this._effectWait>=10&&(this._effectWait=0,this._bc.clear(),this._bc.set(this,"slideFrame"),_main.gotoRoom(_main._sceneMng._statusId))},t.prototype.enterFrame=function(){if(!_main._control.isDown||_main._about.isOpen||_main._detail.isOpen||_main._menu.isOpen?(_main._control._x1=0,this._swipeSpeedX*=.85,_main._control._y1=0,this._swipeSpeedY*=.85):(0!=_main._control._x1?(this._swipeSpeedX=_main._control._x2-_main._control._x1,_main._control._x1=_main._control._x2):(this._swipeSpeedX=0-_main._control._x1,_main._control._x1=_main._control._x2),0!=_main._control._y1?(this._swipeSpeedY=_main._control._y2-_main._control._y1,_main._control._y1=_main._control._y2):(this._swipeSpeedY=0-_main._control._y1,_main._control._y1=_main._control._y2)),this._easingX=this._swipeSpeedX*this._easing,this._baseTrgY+=-4e-4*this._easingX,this._baseY=this._baseY*_main._conf.s085a+this._baseTrgY*_main._conf.s085b,this._rObj.rotation.y=this._baseY,this._rObj.rotation.x>=this._rangeXA?this._rObj.rotation.x=this._rangeXA:this._rObj.rotation.x<=-this._rangeXB&&(this._rObj.rotation.x=-this._rangeXB),"top"===_main._sceneMng._status){var t=3*(this._rObj.rotation.y-90*Math.PI/180)+90*Math.PI/180;this._mesh.rotation.y=this._mesh.rotation.y*_main._conf.s094a+t*_main._conf.s094b}else this._mesh.rotation.y=this._rObj.rotation.y;this._mesh.rotation.x=this._rObj.rotation.x,this._saR=this._rObj.rotation.y-this._oldR,this._oldR=this._rObj.rotation.y},t.prototype.slideFrame=function(){this._effectSpeed*=.994,this._effectSpeed<=.94&&(this._effectSpeed=.94);var t=1-this._effectSpeed;this._mesh.position.z=this._mesh.position.z*this._effectSpeed+0*t,this._tex.slideFrame(),Math.abs(this._mesh.position.z)<.01&&(this.isMoving=!1,this._mesh.position.z=0,this._bc.clear(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"),_main.roomFix())},t.prototype.gotoTop=function(){this._vSpeed=0,this.isFirst&&(this.isMoving=!0,this.isFirst=!1,this._tex.gotoTop(),this._topBC.clear(),this._rObj.rotation.y=this._startK-70*Math.PI/180,this._topTrgYR=this._startK,this._mesh.rotation.y=this._startK-180*Math.PI/180,this._topTrgYM=this._startK,this._saR=0,this._oldR=this._rObj.rotation.y,this._topBC.set(this,"topFrameFirst")),this._tex.gotoTop()},t.prototype.topFrameFirst=function(){this._mesh.position.z=this._mesh.position.z*_main._conf.s094a+this._farZ*_main._conf.s094b,this._mesh.rotation.y=this._mesh.rotation.y*_main._conf.s095a+this._topTrgYM*_main._conf.s095b,this._rObj.rotation.y=this._rObj.rotation.y*_main._conf.s093a+this._topTrgYR*_main._conf.s093b,this._saR=this._rObj.rotation.y-this._oldR,this._oldR=this._rObj.rotation.y,Math.abs(this._mesh.rotation.y-this._topTrgYM)<.005&&(this.isMoving=!1,this._topBC.clear(),this._mesh.position.z=this._farZ,this._mesh.rotation.y=this._rObj.rotation.y=this._topTrgYR,this._swipeSpeedX=0,this._swipeSpeedY=0,this._baseY=this._rObj.rotation.y,this._baseTrgY=this._rObj.rotation.y,this._saR=0,this._oldR=this._rObj.rotation.y,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"),_main.topFix())},t.prototype.gotoRoom=function(){if(this.isRtoR)this.isRtoR=!1;else{var t,e;this.isMoving=!0,e=3*(t=_main._sceneMng._topMenu[_main._sceneMng._statusId].startK*Math.PI/180),this._oldrObjRY=t+this._startK,this._oldMeshRY=e+this._startK,this._vSpeed=1,_main.removeEnterFrame(this);var i=(this._mesh.rotation.y-this._startK)/Math.PI*180;i=i>0?Math.ceil(i):Math.floor(i);var s=Math.abs(i);if(this._rObj.rotation.y=this._mesh.rotation.y,this._saR=0,this._oldR=this._rObj.rotation.y,s%360==180)this._roomR=i>0?(s+180)*Math.PI/180+this._startK:(Math.ceil(i)+180)*Math.PI/180+this._startK;else if(s%360==0||s%360==360)this._roomR=i>0?(s+360)*Math.PI/180+this._startK:(Math.ceil(i)+360)*Math.PI/180+this._startK;else{var a=i%360;this._roomR=(i-a+360)*Math.PI/180+this._startK}this._tex.gotoRoom(),this._vSpeed=1,this._topBC.clear(),this._topBC.set(this,"topToRoomFrame")}},t.prototype.topToRoomFrame=function(){this._vSpeed-=.0014,this._vSpeed<=.91&&(this._vSpeed=.91);var t=1-this._vSpeed;this._mesh.position.z=this._mesh.position.z*this._vSpeed+0*t,this._mesh.rotation.y=this._mesh.rotation.y*this._vSpeed+this._roomR*t,this._rObj.rotation.y=this._rObj.rotation.y*this._vSpeed+this._roomR*t,Math.abs(this._mesh.position.z-0)<.02&&Math.abs(this._mesh.rotation.y-this._roomR)<.005&&(this.isMoving=!1,this._topBC.clear(),this._vSpeed=1,this._mesh.position.z=0,this._mesh.rotation.y=this._rObj.rotation.y=this._roomR,this._swipeSpeedX=0,this._swipeSpeedY=0,this._baseY=this._rObj.rotation.y,this._baseTrgY=this._rObj.rotation.y,this._saR=0,this._oldR=this._rObj.rotation.y,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"),_main.roomFix())},t.prototype.roomToTop=function(){this.isMoving=!1,_main.removeEnterFrame(this),this._tex.roomToTop();var t,e=(this._rObj.rotation.y-this._startK)/Math.PI*180;t=Math.round(e/360),this._roomR=(360*(t-1)+3*_main._sceneMng._topMenu[_main._sceneMng._statusId].startK)*Math.PI/180+this._startK,this._vSpeed=1,this._topBC.clear(),this._topBC.set(this,"roomToTopFrame")},t.prototype.roomToTopFrame=function(){this._vSpeed*=.998,this._vSpeed<=.88&&(this._vSpeed=.88);var t=1-this._vSpeed;this._mesh.position.z=this._mesh.position.z*this._vSpeed+this._farZ*t,this._mesh.rotation.y=this._mesh.rotation.y*this._vSpeed+this._roomR*t,this._rObj.rotation.y=this._rObj.rotation.y*this._vSpeed+this._roomR*t,Math.abs(this._mesh.position.z-this._farZ)<.02&&Math.abs(this._mesh.rotation.y-this._roomR)<.002&&(this.isMoving=!1,this._topBC.clear(),this._vSpeed=1,this._mesh.position.z=this._farZ,this._mesh.rotation.y=this._oldMeshRY,this._rObj.rotation.y=this._oldrObjRY,this._swipeSpeedX=0,this._swipeSpeedY=0,this._baseY=this._rObj.rotation.y,this._baseTrgY=this._rObj.rotation.y,this._saR=0,this._oldR=this._rObj.rotation.y,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"),_main.roomToTopFix())},t.prototype.selectRoomFromMenu=function(t){this._tex.selectRoomFromMenu(t)},t.prototype.onResize=function(){"SP"===_main._device?window.innerWidth>window.innerHeight?this._farZ=-4200:this._farZ=-5100:window.innerWidth>window.innerHeight?this._farZ=-4200:this._farZ=-5300,"top"===_main._sceneMng._status&&(this._mesh.position.z=this._farZ,this._rObj.position.z=this._farZ)},t}(),SpRotation=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._wrapper=document.getElementById("sp-rotate-attention"),"SP"!==_main._device?document.body.removeChild(this._wrapper):(_main.addResize(this),this.onResize())},t.prototype.onResize=function(){window.innerHeight<window.innerWidth?this._wrapper.style.display="block":this._wrapper.style.display="none"},t}(),TextureSet=function(){"use strict";function t(t){this._parent=t}return t.prototype.init=function(){this._texCount=0,this._texList=[],"PC"===_main._device||"TB"===_main._device?this._texList=[_main._parts.getTex("image/sphere/bag1.jpg"),_main._parts.getTex("image/sphere/scarves1.jpg"),_main._parts.getTex("image/sphere/jeweliry1.jpg"),_main._parts.getTex("image/sphere/wear1.jpg"),_main._parts.getTex("image/sphere/home1.jpg"),_main._parts.getTex("image/sphere/fabric1.jpg")]:this._texList=[_main._parts.getTex("image/sphere/bag1_sp.jpg"),_main._parts.getTex("image/sphere/scarves1_sp.jpg"),_main._parts.getTex("image/sphere/jeweliry1_sp.jpg"),_main._parts.getTex("image/sphere/wear1_sp.jpg"),_main._parts.getTex("image/sphere/home1_sp.jpg"),_main._parts.getTex("image/sphere/fabric1_sp.jpg")],this._alpha=0,this._shader={vertexShader:_main._parts.getShader("shader/sphere_vtx.js"),fragmentShader:_main._parts.getShader("shader/sphere_frg.js"),uniforms:{textureM:{value:this._texList[0]},textureS:{value:null},mixNum:{value:0},alpha:{value:this._alpha}},transparent:!0,side:THREE.BackSide},this._mat=new THREE.ShaderMaterial(this._shader),this._dummyList=[];for(var t=new THREE.PlaneGeometry(10,10,1,1),e=0;e<this._texList.length;e++){var i=new THREE.MeshBasicMaterial({map:this._texList[e]});(i=new THREE.Mesh(t,i)).position.z=-2e3,this._parent._parent._scene.add(i),this._dummyList.push(i)}this._fadeBC=new Beacon,this._page=0,this._oldT=null,this._newT=null,this._topBC=new Beacon,this.isFirst=!0},t.prototype.contentsStart=function(){this._page=_main._sceneMng._page;for(var t=0;t<this._dummyList.length;t++)this._parent._parent._scene.remove(this._dummyList[t]);this._dummyList=[]},t.prototype.clickBg=function(t,e){},t.prototype.enterFrame=function(){},t.prototype.effectStart=function(){this._page=_main._sceneMng._page,this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._oldT=this._texList[_main._sceneMng._statusId],this._newT=this._texList[_main._sceneMng._statusId],this._shader.uniforms.textureM.value=this._newT,this._shader.uniforms.textureS.value=null,this._mixNum=0,this._shader.uniforms.mixNum.value=this._mixNum},t.prototype.slideFrame=function(){this._alpha=this._alpha*_main._conf.s094a+1*_main._conf.s094b,this._shader.uniforms.alpha.value=this._alpha},t.prototype.topMoveImage=function(){this._oldT=this._texList[this._page],this._mixNum=0,this._shader.uniforms.mixNum.value=this._mixNum,this._page=_main._sceneMng._page,this._newT=this._texList[this._page],this._shader.uniforms.textureM.value=this._oldT,this._shader.uniforms.textureS.value=this._newT,this._fadeBC.clear(),this._fadeBC.set(this,"fadeFrame")},t.prototype.fadeFrame=function(){this._mixNum=this._mixNum*_main._conf.s093a+1*_main._conf.s093b,this._shader.uniforms.mixNum.value=this._mixNum,Math.abs(this._mixNum-1)<.01&&(this._fadeBC.clear(),this._shader.uniforms.textureM.value=this._newT,this._mixNum=0,this._shader.uniforms.mixNum.value=this._mixNum,this._shader.uniforms.textureS.value=null)},t.prototype.gotoTop=function(){this.isFirst&&(this.isFirst=!1,this._topBC.clear(),this._topBC.set(this,"topFirstFrame"))},t.prototype.topFirstFrame=function(){this._alpha=this._alpha*_main._conf.s094a+.78*_main._conf.s094b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-.78)<.01&&(this._alpha=.78,this._shader.uniforms.alpha.value=this._alpha,this._topBC.clear())},t.prototype.gotoRoom=function(){this._topBC.clear(),this._topBC.set(this,"topToRoomFrame")},t.prototype.topToRoomFrame=function(){this._alpha=this._alpha*_main._conf.s098a+.92*_main._conf.s098b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-.92)<.01&&(this._alpha=.92,this._shader.uniforms.alpha.value=this._alpha,this._topBC.clear())},t.prototype.roomToTop=function(){this._topBC.clear(),this._topBC.set(this,"roomToTopFrame")},t.prototype.roomToTopFrame=function(){this._alpha=this._alpha*_main._conf.s092a+.78*_main._conf.s092b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-.78)<.01&&(this._alpha=.78,this._shader.uniforms.alpha.value=this._alpha,this._topBC.clear())},t.prototype.selectRoomFromMenu=function(t){this._page=t,this._newT=this._texList[this._page],this._shader.uniforms.textureM.value=this._newT},t}(),UiSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._wrapper=document.getElementById("ui-set"),"SP"===_main._device&&"iOS"===_main._ua.OS&&window.screen.height>800&&(this._wrapper.style.bottom="35px"),this._back=document.getElementById("link-back"),this._prev=document.getElementById("link-prev"),this._next=document.getElementById("link-next"),this._back_m=document.getElementById("ui-back-m"),this._prev_m=document.getElementById("ui-np-p"),this._next_m=document.getElementById("ui-np-n"),this._backM=document.getElementById("ui-back-m"),this._backSP=document.getElementById("ui-back-sp"),this._prevSP=document.getElementById("ui-prev-sp"),this._nextSP=document.getElementById("ui-next-sp"),"SP"!==_main._device&&"TB"!==_main._device||$("#ui-next-prev").css({display:"none"});var t=this;"PC"===_main._device?(this._back.addEventListener("mouseenter",function(e){TweenMax.killTweensOf(t._back_m),TweenMax.to(t._back_m,.25,{left:"-6px",repeat:-1,yoyo:!0})},!1),this._back.addEventListener("mouseleave",function(e){TweenMax.killTweensOf(t._back_m),TweenMax.to(t._back_m,.25,{left:"0"})},!1),this._prev.addEventListener("mouseenter",function(e){TweenMax.killTweensOf(t._prev_m),TweenMax.to(t._prev_m,.25,{left:"-6px",repeat:-1,yoyo:!0})},!1),this._prev.addEventListener("mouseleave",function(e){TweenMax.killTweensOf(t._prev_m),TweenMax.to(t._prev_m,.25,{left:"0"})},!1),this._next.addEventListener("mouseenter",function(e){TweenMax.killTweensOf(t._next_m),TweenMax.to(t._next_m,.25,{left:"6px",repeat:-1,yoyo:!0})},!1),this._next.addEventListener("mouseleave",function(e){TweenMax.killTweensOf(t._next_m),TweenMax.to(t._next_m,.25,{left:"0"})},!1),this._prev.addEventListener("click",function(e){if($(t._wrapper).css("opacity")>=1){var i=_main._sceneMng._statusId-1;i<0&&(i=5),_main.roomToRoom(i)}},!1),this._next.addEventListener("click",function(e){if($(t._wrapper).css("opacity")>=1){var i=_main._sceneMng._statusId+1;i>5&&(i=0),_main.roomToRoom(i)}},!1),this._back.addEventListener("click",function(e){$(t._wrapper).css("opacity")>=1&&_main.roomToTop()},!1)):(this._backSP.addEventListener("click",function(e){$(t._wrapper).css("opacity")>=1&&_main.roomToTop()},!1),this._prevSP.addEventListener("click",function(e){if($(t._wrapper).css("opacity")>=1){var i=_main._sceneMng._statusId-1;i<0&&(i=5),_main.roomToRoom(i)}},!1),this._nextSP.addEventListener("click",function(e){if($(t._wrapper).css("opacity")>=1){var i=_main._sceneMng._statusId+1;i>5&&(i=0),_main.roomToRoom(i)}},!1))},t.prototype.showRoom=function(){TweenMax.killTweensOf(this._wrapper),_main._detail.isOpen?TweenMax.set(this._wrapper,{opacity:0}):TweenMax.set(this._wrapper,{display:"block",opacity:0}),TweenMax.to(this._wrapper,.5,{opacity:1,delay:.2})},t.prototype.hideRoom=function(){var t=this;TweenMax.killTweensOf(this._wrapper),TweenMax.to(this._wrapper,.4,{opacity:0,onComplete:function(){$(t._wrapper).css({display:"none"})}})},t}(),AboutSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this.isOpen=!1,this._wrapper=document.getElementById("about-wrapper"),this._about=document.getElementById("about"),this._txt=document.getElementById("about-txt"),this._logo=document.getElementById("logo"),this._ui=document.getElementById("ui-set"),this._arrow=document.getElementById("arrow-set"),this._btn=document.getElementById("btn-stage"),"PC"===_main._device||"TB"===_main._device?(this._width=1280,this._height=720):(this._width=750,this._height=1340);var t=this;"PC"===_main._device?(this._close=document.getElementById("ab-close"),this._close.addEventListener("mouseenter",function(){TweenMax.killTweensOf(t._close),TweenMax.to(t._close,.2,{opacity:.5})},!1),this._close.addEventListener("mouseleave",function(){TweenMax.killTweensOf(t._close),TweenMax.to(t._close,.2,{opacity:1})},!1),this._close.addEventListener("click",function(){t.closeAbout()})):(this._spClose=document.getElementById("ab-close-sp"),this._spClose.addEventListener("click",function(){t.closeAbout()})),this._imgCount=0,this._imgBC=new Beacon,this._imgCurrent=0,this._imgCount=0},t.prototype.createPlane=function(){this._resizeScale=1,this._g=new THREE.PlaneGeometry(this._width,this._height,1,1),this._time=0,this._strength=.03,this._strength2=0,this._alpha=1,this._whiteP=5,this._mixer=1,"PC"===_main._device||"TB"===_main._device?this._newT=_main._parts.getTex("image/about/about_bg1.jpg"):this._newT=_main._parts.getTex("image/about/about_bg1_sp.jpg"),this._oldT=null,this._imgBlend=0,this._shader={vertexShader:_main._parts.getShader("shader/about_vtx.js"),fragmentShader:_main._parts.getShader("shader/about_frg.js"),uniforms:{texture:{value:this._newT},texture2:{value:this._oldT},noise:{value:_main._world._noise._render.texture},time:{value:this._time},strength:{value:this._strength},strength2:{value:this._strength2},alpha:{value:this._alpha},whiteP:{value:this._whiteP},mixer:{value:this._mixer},imgBlend:{value:this._imgBlend}},transparent:!0},this._m=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._g,this._m),_main._world._scene.add(this._mesh),this._cam=_main._world._dummy._cam,_main.addResize(this),this.onResize()},t.prototype.contentsStart=function(){this._m.opacity=0,_main._world._scene.remove(this._mesh)},t.prototype.show=function(){this.isOpen||(this.isOpen=!0,TweenMax.killTweensOf(this._txt),TweenMax.set(this._txt,{opacity:0,display:"none"}),TweenMax.killTweensOf(this._wrapper),"PC"===_main._device?TweenMax.set(this._wrapper,{opacity:0,display:"block"}):TweenMax.set(this._wrapper,{opacity:0,display:"block",position:"absolute"}),TweenMax.killTweensOf(this._logo),TweenMax.set(this._logo,{opacity:0,display:"none"}),TweenMax.killTweensOf(this._ui),TweenMax.set(this._ui,{opacity:0}),TweenMax.killTweensOf(this._btn),TweenMax.set(this._btn,{opacity:0}),TweenMax.killTweensOf(this._arrow),TweenMax.set(this._arrow,{opacity:0}),this._wait=0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"waitFrame"))},t.prototype.waitFrame=function(){if(this._wait++,this._wait>=10){_main.removeEnterFrame(this);var t=this;TweenMax.to(this._wrapper,1,{opacity:1,onComplete:function(){TweenMax.set(t._txt,{display:"block"}),TweenMax.to(t._txt,1,{opacity:1,delay:.6})}}),"PC"!==_main._device&&(this._spHeader=document.getElementById("about-side-sp"),TweenMax.killTweensOf(this._spHeader),TweenMax.set(this._spHeader,{display:"block",opacity:0}),TweenMax.to(this._spHeader,1,{opacity:1})),this._mesh.position.x=0,this._alpha=1,this._shader.uniforms.alpha.value=this._alpha,this._strength=.05,this._shader.uniforms.strength.value=this._strength,this._whiteP=4,this._shader.uniforms.whiteP.value=this._whiteP,this._time=0,this._shader.uniforms.time.value=this._time,this._mixer=.9,this._shader.uniforms.mixer.value=this._mixer,this._mesh.parent||_main._world._scene.add(this._mesh),"PC"!==_main._device&&(document.body.style.overflowY="visible",window.scroll(0,0)),_main._world._dummy.renderEnable(!1),_main._world._noise.aboutStart(),_main.addEnterFrame(this,"showFrame"),this.imageTimerStart()}},t.prototype.showFrame=function(){this._time+=.04,this._shader.uniforms.time.value=this._time,this._strength=this._strength*_main._conf.s096a+0*_main._conf.s096b,this._shader.uniforms.strength.value=this._strength,this._whiteP=this._whiteP*_main._conf.s0985a+.26*_main._conf.s0985b,this._shader.uniforms.whiteP.value=this._whiteP,this._mixer=this._mixer*_main._conf.s0985a+0*_main._conf.s0985b,this._shader.uniforms.mixer.value=this._mixer,Math.abs(this._mixer-0<.001)&&_main.removeEnterFrame(this)},t.prototype.closeAbout=function(){var t=this;TweenMax.killTweensOf(this._logo),TweenMax.set(t._logo,{display:"block"}),TweenMax.to(this._logo,.8,{opacity:1}),TweenMax.killTweensOf(this._ui),TweenMax.to(this._ui,.8,{opacity:1}),TweenMax.killTweensOf(this._btn),TweenMax.to(this._btn,.8,{opacity:1}),TweenMax.killTweensOf(this._arrow),TweenMax.to(this._arrow,.8,{opacity:1}),TweenMax.killTweensOf(this._wrapper),TweenMax.killTweensOf(this._txt),TweenMax.to(this._wrapper,.6,{opacity:0,onComplete:function(){"PC"===_main._device?TweenMax.set(t._wrapper,{display:"none"}):TweenMax.set(t._wrapper,{display:"none",position:"fixed"}),TweenMax.set(t._txt,{display:"none",opacity:0})}}),"PC"!==_main._device&&(TweenMax.killTweensOf(this._spHeader),TweenMax.to(this._spHeader,.6,{opacity:0,onComplete:function(){TweenMax.set(t._spHeader,{display:"none"})}}));var e=_main._world._post._display._mesh;TweenMax.killTweensOf(e),TweenMax.set(e.position,{x:.5*window.innerWidth}),TweenMax.to(e.position,1,{ease:Power3.easeInOut,x:0});var i=_main._world._naviImage._mesh;TweenMax.killTweensOf(i),TweenMax.set(i.position,{x:.5*window.innerWidth}),TweenMax.to(i.position,1,{ease:Power3.easeInOut,x:0}),TweenMax.killTweensOf(this._mesh.position);var s=-(.5*window.innerWidth+this._mesh.scale.x*this._width*.5+100);TweenMax.to(this._mesh.position,1.2,{ease:Power3.easeInOut,x:s,onComplete:function(){t.stopClose()}}),_main.removeEnterFrame(this)},t.prototype.stopClose=function(){this.isOpen=!1,this._cam.position.z=0,this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,_main.removeEnterFrame(this),this._imgCount=0,this._imgBC.clear(),null!==this._oldT&&(this._oldT.dispose(),this._oldT=null),this._oldT=this._newT,this._shader.uniforms.texture.value=this._oldT,this._shader.uniforms.texture2.value=this._newT,this._imgBlend=0,this._shader.uniforms.imgBlend.value=this._imgBlend,_main._world._dummy.renderEnable(!0),_main._world._noise.openingEnd(),this._mesh.parent&&_main._world._scene.remove(this._mesh)},t.prototype.closeFrame=function(){this._time+=.04,this._shader.uniforms.time.value=this._time,this._strength=this._strength*_main._conf.s097a+.02*_main._conf.s097b,this._shader.uniforms.strength.value=this._strength,this._whiteP=this._whiteP*_main._conf.s097a+2*_main._conf.s097b,this._shader.uniforms.whiteP.value=this._whiteP},t.prototype.clearFromMenu=function(){this.isOpen=!1,_main._world._dummy.renderEnable(!0),TweenMax.killTweensOf(this._logo),TweenMax.set(this._logo,{opacity:1,display:"block"}),TweenMax.killTweensOf(this._ui),TweenMax.set(this._ui,{opacity:1}),TweenMax.killTweensOf(this._btn),TweenMax.set(this._btn,{opacity:1}),TweenMax.killTweensOf(this._arrow),TweenMax.set(this._arrow,{opacity:1}),TweenMax.killTweensOf(this._wrapper),TweenMax.killTweensOf(this._txt),TweenMax.set(this._wrapper,{display:"none"}),TweenMax.set(this._txt,{display:"none",opacity:0}),"PC"!==_main._device&&(TweenMax.killTweensOf(this._spHeader),TweenMax.set(this._spHeader,{opacity:0,display:"none"})),_main._world._noise.openingEnd(),_main.removeEnterFrame(this),this._mesh.parent&&_main._world._scene.remove(this._mesh),this._imgCount=0,this._imgBC.clear(),null!==this._oldT&&(this._oldT.dispose(),this._oldT=null),this._oldT=this._newT,this._shader.uniforms.texture.value=this._oldT,this._shader.uniforms.texture2.value=this._newT,this._imgBlend=0,this._shader.uniforms.imgBlend.value=this._imgBlend},t.prototype.imageTimerStart=function(){"PC"===_main._device||"TB"===_main._device?this._pathList=["image/about/about_bg1.jpg","image/about/about_bg2.jpg","image/about/about_bg3.jpg"]:this._pathList=["image/about/about_bg1_sp.jpg","image/about/about_bg2_sp.jpg","image/about/about_bg3_sp.jpg"],this._imgCount=0,this._imgBC.clear(),this._imgBC.set(this,"imgCountFrame")},t.prototype.imgCountFrame=function(){this._imgCount++,this._imgCount>=600&&(this._imgCount=0,this._imgBC.clear(),this.loadImage())},t.prototype.loadImage=function(){var t=this;this._imgCurrent++,this._imgCurrent>=this._pathList.length&&(this._imgCurrent=0);var e=this._pathList[this._imgCurrent];(new THREE.TextureLoader).load(e,function(e){t.loadTextureEnd(e)})},t.prototype.loadTextureEnd=function(t){this.isOpen&&(t.needsUpdate=!0,t.minFilter=THREE.LinearFilter,t.magFilter=THREE.LinearFilter,null!==this._oldT&&(this._oldT.dispose(),this._oldT=null),this._oldT=this._newT,this._newT=t,this._shader.uniforms.texture.value=this._oldT,this._shader.uniforms.texture2.value=this._newT,this._imgBlend=0,this._shader.uniforms.imgBlend.value=this._imgBlend,this._strength2=.03,this._shader.uniforms.strength2.value=this._strength2,this._strength=0,this._shader.uniforms.strength.value=this._strength,this._time=0,this._shader.uniforms.time.value=this._time,this._spA=1,this._imgBC.clear(),this._imgBC.set(this,"imgBlendFrame"))},t.prototype.imgBlendFrame=function(){this._spA*=.9992;var t=1-this._spA;this._time+=.04,this._shader.uniforms.time.value=this._time,this._imgBlend=this._imgBlend*this._spA+1*t,this._shader.uniforms.imgBlend.value=this._imgBlend,this._strength2=this._strength2*_main._conf.s098a+0*_main._conf.s097b,this._shader.uniforms.strength2.value=this._strength2,this._strength=this._strength*_main._conf.s096a+.025*_main._conf.s096b,this._shader.uniforms.strength.value=this._strength,Math.abs(this._imgBlend-1)<1e-4&&Math.abs(this._strength2<1e-4)&&(this._imgBlend=0,this._shader.uniforms.imgBlend.value=this._imgBlend,this._strength2=0,this._shader.uniforms.strength2.value=this._strength2,this._strength=0,this._shader.uniforms.strength.value=this._strength,this._imgBC.clear(),null!==this._oldT&&(this._oldT.dispose(),this._oldT=null),this._shader.uniforms.texture.value=this._newT,this._shader.uniforms.texture2.value=this._oldT,this.imageTimerStart())},t.prototype.onResize=function(){var t=window.innerWidth/this._width,e=window.innerHeight/this._height;this._resizeScale=t>e?t:e,this._mesh.scale.x=this._resizeScale,this._mesh.scale.y=this._resizeScale},t}(),Beacon=function(){function t(){this._trg,this._funcName=""}return t.prototype.set=function(t,e){null!=this._trg&&null!=this._trg||(this._trg=t,this._funcName=e,_main.addEnterFrame(this,"onEnterFrame"))},t.prototype.onEnterFrame=function(){this._trg[this._funcName]()},t.prototype.clear=function(){null!=this._trg&&null!=this._trg&&(_main.removeEnterFrame(this),this._trg=null,this._funcName="")},t}(),BgPattarn=function(){"use strict";function t(t){this._parent=t}return t.prototype.init=function(){this._visible=!0,this._vBC=new Beacon,this._g=new THREE.PlaneGeometry(1600,1360,2,2),this._time=0,this._speed=1,this._strength=.0035,this._size=10,this._alpha=0,"SP"===_main._device&&(this._size=6),this._saR=0,this._shader={vertexShader:_main._parts.getShader("shader/bgPattarn_vtx.js"),fragmentShader:_main._parts.getShader("shader/bgPattarn_frg.js"),uniforms:{texture:{value:_main._parts.getTex("image/parts/pattarn.jpg")},time:{value:this._time},speed:{value:this._speed},strength:{value:this._strength},size:{value:this._size},alpha:{value:this._alpha}},transparent:!0},this._m=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._g,this._m),"PC"===_main._device?this._mesh.position.z=-7e3:this._mesh.position.z=-7800,this._mesh.visible=!1;this._mesh.scale.set(15,15,15),this._parent._scene.add(this._mesh)},t.prototype.contentsStart=function(){},t.prototype.enterFrame=function(){this._time+=.02,this._shader.uniforms.time.value=this._time;var t=_main._world._dummy._sphere._saR;this._saR=Math.abs(t);var e=.2*this._saR+.0035;this._strength=this._strength*_main._conf.s099a+e*_main._conf.s099b,this._shader.uniforms.strength.value=this._strength},t.prototype.visible=function(t){t?(this._time=0,this._shader.uniforms.time.value=this._time,this._mesh.visible=!0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame"),this._vBC.clear(),this._vBC.set(this,"showFrame")):(this._vBC.clear(),this._vBC.set(this,"hideFrame"))},t.prototype.showFrame=function(){this._alpha=this._alpha*_main._conf.s098a+1*_main._conf.s098b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-1)<.01&&(this._vBC.clear(),this._alpha=1,this._shader.uniforms.alpha.value=this._alpha)},t.prototype.hideFrame=function(){this._alpha=this._alpha*_main._conf.s094a+0*_main._conf.s094b,this._shader.uniforms.alpha.value=this._alpha,Math.abs(this._alpha-0)<.01&&(this._vBC.clear(),this._alpha=0,this._shader.uniforms.alpha.value=this._alpha,this._mesh.visible=!1,_main.removeEnterFrame(this))},t.prototype.renderEnable=function(t){_main.removeEnterFrame(this),t&&this._mesh.visible&&_main.addEnterFrame(this,"enterFrame")},t}(),BtnMainSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._arrows=new ArrowSet,this._traceBC=new Beacon,this.isOver=!1,this._wrapper=document.getElementById("btn-stage"),this._btn0=document.getElementById("btn-main-0"),this._btn1=document.getElementById("btn-main-1"),this._btn2=document.getElementById("btn-main-2"),this._btn3=document.getElementById("btn-main-3"),this._btn4=document.getElementById("btn-main-4"),this._btn5=document.getElementById("btn-main-5"),this._btnList=[this._btn0,this._btn1,this._btn2,this._btn3,this._btn4,this._btn5],this._trgList=[]},t.prototype.contentsStart=function(){this._wrapper.style.opacity=0,this._wrapper.style.display="none";for(var t=this,e=0;e<this._btnList.length;e++)"PC"===_main._device&&(this._btnList[e].addEventListener("mouseenter",function(e){t.mouseOver(e)},!1),this._btnList[e].addEventListener("mouseleave",function(e){t.mouseOut(e)},!1)),this._btnList[e].addEventListener("click",function(e){t.mouseClick(e)},!1)},t.prototype.setTarget=function(){if(this._wrapper.style.display="block",this._trgList=[],"top"===_main._sceneMng._status){var t=_main._world._roomNavi._cL._nameList;if(t.length!==this._btnList.length)return void alert("error btnMainSet");for(var e=0;e<t.length;e++)this._trgList.push(t[e])}this._traceBC.clear(),this._traceBC.set(this,"traceFrame")},t.prototype.gotoTop=function(){TweenMax.set(this._wrapper,{opacity:0,display:"block"});var t=_main._world._roomNavi._cL._nameList;if(t.length===this._btnList.length){this._trgList=[];for(var e=0;e<t.length;e++)this._trgList[e]=t[e];if(TweenMax.killTweensOf(this._wrapper),"SP"===_main._device&&TweenMax.set(this._wrapper,{bottom:"54px"}),"PC"===_main._device)for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg.png)";else for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg_sp.png)";TweenMax.to(this._wrapper,.4,{opacity:1,delay:.2}),this._traceBC.clear(),this._traceBC.set(this,"traceFrame"),this._arrows.show()}else alert("error btnMainSet")},t.prototype.gotoRoom=function(){_main._detail.isOpen?TweenMax.set(this._wrapper,{opacity:0}):TweenMax.set(this._wrapper,{display:"block",opacity:0});var t=_main._world._roomNavi._mList[_main._sceneMng._statusId]._nameList;if(t.length===this._btnList.length){this._trgList=[];for(var e=0;e<t.length;e++)this._trgList[e]=t[e];if(TweenMax.killTweensOf(this._wrapper),"SP"===_main._device?TweenMax.set(this._wrapper,{bottom:"82px"}):"TB"===_main._device&&TweenMax.set(this._wrapper,{bottom:"100px"}),"PC"===_main._device)for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg2.png)";else for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg_sp2.png)";TweenMax.to(this._wrapper,.4,{opacity:1}),this._traceBC.clear(),this._traceBC.set(this,"traceFrame"),this._arrows.show()}else alert("error btnMainSet")},t.prototype.roomToTop=function(){this._traceBC.clear(),TweenMax.killTweensOf(this._wrapper),(new TimelineMax).to(this._wrapper,.3,{opacity:0}).set(this._wrapper,{display:"none"}),this._arrows.hide()},t.prototype.traceFrame=function(){for(var t,e=0;e<this._btnList.length;e++){t=this._trgList[e]._group.visible?"block":"none";var i=this._trgList[e]._group.position.x;TweenMax.set(this._btnList[e],{display:t,x:String(i+"px")})}},t.prototype.roomToTopMenuReset=function(){TweenMax.set(this._wrapper,{display:"block",opacity:0});var t=_main._world._roomNavi._cL._nameList;if(t.length===this._btnList.length){this._trgList=[];for(var e=0;e<t.length;e++)this._trgList[e]=t[e];if(this.traceFrame(),"PC"===_main._device)for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg.png)";else for(e=0;e<this._btnList.length;e++)this._btnList[e].style.backgroundImage="url(image/parts/main_btn_bg_sp.png)";TweenMax.killTweensOf(this._wrapper),"PC"!==_main._device&&TweenMax.set(this._wrapper,{bottom:"54px"}),TweenMax.to(this._wrapper,.5,{opacity:.99})}else alert("error btnMainSet")},t.prototype.roomToTopFix=function(){_main._device;TweenMax.killTweensOf(this._wrapper),TweenMax.set(this._wrapper,{opacity:1}),this._traceBC.clear(),this._traceBC.set(this,"traceFrame"),this._arrows.show()},t.prototype.roomToRoom=function(){this._traceBC.clear(),TweenMax.killTweensOf(this._wrapper),(new TimelineMax).to(this._wrapper,.3,{opacity:0}).set(this._wrapper,{display:"none"}),this._arrows.hide()},t.prototype.mouseOver=function(t){this.isOver=!0;var e=$("#"+t.target.id);TweenMax.to(e,.2,{ease:Power4.easeOut,backgroundColor:"rgba(255,255,255,0.2)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"100%"}),TweenMax.to(i[3],.15,{x:"100%",delay:.12}),TweenMax.to(i[2],.12,{y:"-100%"}),TweenMax.to(i[1],.15,{x:"-100%",delay:.12}))},t.prototype.mouseOut=function(t){this.isOver=!1;var e=$("#"+t.target.id);TweenMax.to(e,.2,{backgroundColor:"rgba(255,255,255,0.0)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"0%",delay:.15}),TweenMax.to(i[3],.15,{x:"0%"}),TweenMax.to(i[2],.12,{y:"0%",delay:.15}),TweenMax.to(i[1],.15,{x:"0%"}))},t.prototype.mouseClick=function(t){if(!($(this._wrapper).css("opacity")<1||_main._world._dummy._sphere.isMoving)){var e;switch(t.target.id){case"btn-main-0":e=0;break;case"btn-main-1":e=1;break;case"btn-main-2":e=2;break;case"btn-main-3":e=3;break;case"btn-main-4":e=4;break;case"btn-main-5":e=5}e>=0&&this.enterAction(e)}},t.prototype.enterAction=function(t){if("top"!==_main._sceneMng._status&&"opening"!==_main._sceneMng._status)return _main.sendGA(_main._GAroomList[_main._sceneMng._statusId][t]),void _main._detail.show(_main._sceneMng._statusId,t);"top"===_main._sceneMng._status&&(_main.sendGA(_main._GAtopList[t]),_main.gotoRoom(t)),this._traceBC.clear(),TweenMax.killTweensOf(this._wrapper),(new TimelineMax).to(this._wrapper,.2,{opacity:0}).set(this._wrapper,{display:"none"}),this._arrows.hide()},t}(),ArrowSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._wrapper=document.getElementById("arrow-set"),this._left=document.getElementById("arrow-left"),this._right=document.getElementById("arrow-right"),this._leftIn=document.getElementById("arrow-left-in"),this._rightIn=document.getElementById("arrow-right-in"),"TB"===_main._device&&(this._wrapper.style.marginTop="12px");var t=this;$(this._left).on("click",function(){t.clickAction("left")}),$(this._right).on("click",function(){t.clickAction("right")})},t.prototype.show=function(){_main._detail.isOpen?TweenMax.set(this._wrapper,{opacity:0}):TweenMax.set(this._wrapper,{display:"block",opacity:0}),TweenMax.killTweensOf(this._wrapper),TweenMax.to(this._wrapper,.3,{opacity:1}),TweenMax.set(this._leftIn,{left:"30px",opacity:0}),TweenMax.killTweensOf(this._leftIn),TweenMax.to(this._leftIn,.8,{ease:Power3.easeOut,left:0,opacity:1,delay:.3}),TweenMax.set(this._rightIn,{right:"30px",opacity:0}),TweenMax.killTweensOf(this._rightIn),TweenMax.to(this._rightIn,.8,{ease:Power3.easeOut,right:0,opacity:1,delay:.3})},t.prototype.hide=function(){this._enable=!1,TweenMax.killTweensOf(this._wrapper),(new TimelineMax).to(this._wrapper,.3,{opacity:0}).set(this._wrapper,{display:"none"})},t.prototype.clickAction=function(t){$(this._wrapper).css("opacity")<1||_main._control.isEnable&&("left"===t?_main._sceneMng.prev():"right"===t&&_main._sceneMng.next())},t}(),CanvasWorld=function(){"use strict";function t(){this._id="world",this._width=0,this._height=0,this._render=null,this._scene=null,this._cam=null,this._fov=45,"PC"===_main._device?(_main._ua.BROWSER,this._renderW=1280,this._renderH=640):_main.isLowSpec?(this._renderW=1024,this._renderH=512):(this._renderW=1280,this._renderH=640),this._resizeTimer=null}return t.prototype.init=function(){this._wrapper=document.getElementById(this._id),this._width=window.innerWidth,this._height=window.innerHeight,this.setViewPort(),this._cam=new THREE.OrthographicCamera(this._viewPort.left,this._viewPort.right,this._viewPort.top,this._viewPort.bottom,this._viewPort.near,this._viewPort.far),this._cam.position.set(0,0,100),this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderer({antialias:!1,alpha:!0}),"PC"!=_main._device?this._render.setPixelRatio(window.devicePixelRatio||1):"Chrome"===_main._ua.BROWSER?this._render.setPixelRatio(window.devicePixelRatio||1):this._render.setPixelRatio(1),this._render.setSize(this._width,this._height),this._wrapper.appendChild(this._render.domElement),this._noise=new NoiseSet,this._noise.init(),this._dummy=new DummyScene,this._dummy.init(),this._post=new PostEffectSet,this._post.init()},t.prototype.setDummyComp=function(){this._finish=new FinishSet,this._cover=new GLCoverSet,this._naviImage=new NaviImage,this._roomNavi=new RoomNavi,this._opening=new OpeningSet,_main._about.createPlane(),_main._detail._bgGL.createPlane(),this.playAnimation()},t.prototype.playAnimation=function(){_main.addResize(this),this.onResize(),this.onEnterFrame(),_main.addEnterFrame(this,"onEnterFrame"),_main.createWorldComp()},t.prototype.contentsStart=function(){this._opening.contentsStart(),this._noise.contentsStart(),this._dummy.contentsStart(),this._roomNavi.contentsStart(),this._finish.contentsStart(),this._post.contentsStart(),this._naviImage.contentsStart()},t.prototype.firstView=function(){},t.prototype.gotoTop=function(){this._roomNavi.gotoTop(),this._dummy._sphere.gotoTop(),this._dummy._pattarn.visible(!0),this._dummy._particle.visible(!0)},t.prototype.gotoRoom=function(){this._roomNavi.gotoRoom(),this._dummy._sphere.gotoRoom(),this._dummy._pattarn.visible(!1),this._dummy._particle.visible(!1)},t.prototype.roomToTop=function(){this._roomNavi.roomToTop(),this._naviImage.hide(),this._dummy._sphere.roomToTop(),this._dummy._pattarn.visible(!0),this._dummy._particle.visible(!0)},t.prototype.roomToTopMenuReset=function(){this._roomNavi.roomToTopMenuReset()},t.prototype.roomToTopFix=function(){this._roomNavi.roomToTopFix()},t.prototype.roomStart=function(){this._roomNavi.roomStart(),this._naviImage.roomStart()},t.prototype.roomToRoom=function(){this._roomNavi.roomToRoom(),this._naviImage.hide(),this._post.effectStartCapScreen()},t.prototype.roomMoveSet=function(){"opening"===_main._sceneMng._status?(this._opening.captureEnd(),this._post.effectStartDisplay()):(this._dummy.roomToRoom(),this._post.effectStartDisplay())},t.prototype.onEnterFrame=function(){this._render.render(this._scene,this._cam)},t.prototype.pause=function(t){t?_main.removeEnterFrame(this):(this.onResize(),_main.removeEnterFrame(this),_main.addEnterFrame(this,"onEnterFrame"))},t.prototype.setViewPort=function(){this._viewPort={};var t=this._width,e=this._height,i=e,s=t/e;this._viewPort={viewSize:i,aspectRatio:s,left:-s*i/2,right:s*i/2,top:i/2,bottom:-i/2,near:0,far:1e4}},t.prototype.onResize=function(){if(this._width=document.documentElement.clientWidth,this._height=window.innerHeight,TweenMax.set($("#world-wrapper"),{width:this._width+"px",height:this._height+"px",top:0,left:0}),TweenMax.set($("#world-in"),{width:this._width+"px",height:this._height+"px",top:0,left:0}),"PC"!=_main._device){var t=!1,e=!1,i=!1;_main._menu&&(t=_main._menu.isOpen),_main._detail&&(e=_main._detail.isOpen),_main._about&&(i=_main._about.isOpen),t||e||i||window.scroll(0,0)}this.setViewPort(),this._cam.left=this._viewPort.left,this._cam.right=this._viewPort.right,this._cam.top=this._viewPort.top,this._cam.bottom=this._viewPort.bottom,this._cam.updateProjectionMatrix(),this._render.setSize(this._width,this._height)},t}(),CapScreen=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this._renderW=_main._world._renderW,this._renderH=_main._world._renderH,this._wait=0,this._render=new THREE.WebGLRenderTarget(this._renderW,this._renderH,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping}),this._moveEffect=new MoveEffect(this)},t.prototype.contentsStart=function(){},t.prototype.effectStart=function(){this._moveEffect.effectStart()},t}(),Config=function(){"use strict";function t(){this._count=0,this._oldTIme=0,this._d=1,this._oldTime=Date.now(),_main.addEnterFrame(this,"enterFrame")}return t.prototype.enterFrame=function(){var t=Date.now(),e=(t-this._oldTime)/1e3/.016;e>=3&&(e=3),this._nd=e,this._d=.8*this._d+.2*e,this.s1=1*this._d,this.s005=.05*this._d,this.s03=.3*this._d,this.s14=1.4*this._d,this.s0020=.02*this._d,this.s0016=.016*this._d,this.s099a=1-.01*this._d,this.s099b=1-this.s099a,this.s0985a=1-.015*this._d,this.s0985b=1-this.s0985a,this.s098a=1-.02*this._d,this.s098b=1-this.s098a,this.s097a=1-.03*this._d,this.s097b=1-this.s097a,this.s096a=1-.04*this._d,this.s096b=1-this.s096a,this.s095a=1-.05*this._d,this.s095b=1-this.s095a,this.s094a=1-.06*this._d,this.s094b=1-this.s094a,this.s093a=1-.07*this._d,this.s093b=1-this.s093a,this.s092a=1-.08*this._d,this.s092b=1-this.s092a,this.s091a=1-.09*this._d,this.s091b=1-this.s091a,this.s090a=1-.1*this._d,this.s090b=1-this.s090a,this.s089a=1-.11*this._d,this.s089b=1-this.s089a,this.s088a=1-.12*this._d,this.s088b=1-this.s088a,this.s087a=1-.13*this._d,this.s087b=1-this.s087a,this.s086a=1-.14*this._d,this.s086b=1-this.s086a,this.s085a=1-.15*this._d,this.s085b=1-this.s085a,this.s084a=1-.16*this._d,this.s084b=1-this.s084a,this.s083a=1-.17*this._d,this.s083b=1-this.s083a,this.s082a=1-.18*this._d,this.s082b=1-this.s082a,this.s081a=1-.19*this._d,this.s081b=1-this.s081a,this.s080a=1-.2*this._d,this.s080b=1-this.s080a,this.s075a=1-.25*this._d,this.s075b=1-this.s075a,this.s070a=1-.3*this._d,this.s070b=1-this.s070a,this.s060a=1-.4*this._d,this.s060b=1-this.s060a,this._oldTime=t},t}(),ControlMng=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._wdd="",this._wdel=0,this._wdelList=[],this.isEnable=!1,this.isWheel=!0,this.isDown=!1,this._x1=0,this._x2=0,this._y1=0,this._y2=0,this._dx=0,this._dy=0,this._startX=0,this._startY=0,"PC"===_main._device?this._evt=document:this._evt=document.getElementById("evt"),this._swipeLeng=50,"PC"!==_main._device&&(this._swipeLeng=5)},t.prototype.enable=function(t){this.isEnable=t,this._x1=0,this._x2=0,this._x2old=0,this._y1=0,this._y2=0,this._dx=0,this._dy=0},t.prototype.contentsStart=function(){var t=this;"PC"===_main._device?(this._evt.addEventListener("mousedown",function(e){t.mouseDownEv(e)}),this._evt.addEventListener("mousemove",function(e){t.mouseMoveEv(e)}),this._evt.addEventListener("mouseup",function(e){t.mouseUpEv(e)})):(this._evt.addEventListener("touchstart",function(e){t.mouseDownEv(e)}),this._evt.addEventListener("touchmove",function(e){t.mouseMoveEv(e)}),this._evt.addEventListener("touchend",function(e){t.mouseUpEv(e)})),$(document).mousewheel(function(e,i,s,a){t.wheelAction(i)}),$(window).keyup(function(e){t.keyUp(e.keyCode)})},t.prototype.mouseDownEv=function(t){if(this.isEnable)if(this.isDown=!0,"PC"===_main._device)this._x1=this._x2=t.clientX,this._y1=this._y2=t.clientY,this._startX=t.clientX,this._startY=t.clientY;else{t.preventDefault();var e=t.touches;this._x1=this._x2=e[0].clientX,this._y1=this._y2=e[0].clientY,this._startX=e[0].clientX,this._startY=e[0].clientY}},t.prototype.mouseMoveEv=function(t){if(this.isEnable){if("PC"===_main._device)this._x2=t.clientX,this._y2=t.clientY;else{var e=t.touches;this._x2=e[0].clientX,this._y2=e[0].clientY}this.isDown&&(this._dx=this._x2-this._x1,this._dy=this._y2-this._y1)}},t.prototype.mouseUpEv=function(t){var e;this.isEnable&&(_main._device,e=Math.abs(this._startX-this._x2),Math.abs(this._startY-this._y2),this._x2,this._y2,_main._about.isOpen||_main._detail.isOpen||_main._menu.isOpen?this.isDown=!1:(e>=this._swipeLeng&&!_main._btnSet.isOver&&(this._x2>this._startX?_main._sceneMng.prev():_main._sceneMng.next()),this.isDown=!1))},t.prototype.wheelAction=function(t){this._wdel=t,0===this._wdelList.length?this._wdelList.push(this._wdel):this._wdelList[this._wdelList.length-1]===this._wdel?this._wdelList.push(this._wdel):this._wdelList=[],this._wdelList.length>4||(this._wdel<=-1?("next"===this._wdd&&(this.isEnable&&!_main._about.isOpen&&_main._sceneMng.next(),_main._detail.isOpen&&"PC"===_main._device&&_main._detail.checkWheel(this._wdel)),this._wdd="next"):this._wdel>=1&&("prev"===this._wdd&&(this.isEnable&&!_main._about.isOpen&&_main._sceneMng.prev(),_main._detail.isOpen&&"PC"===_main._device&&_main._detail.checkWheel(this._wdel)),this._wdd="prev"))},t.prototype.wheelComp=function(){this._wdd=""},t.prototype.keyUp=function(t){this.isEnable&&(39===t?_main._sceneMng.next():37===t&&_main._sceneMng.prev())},t}(),Debug=function(){function t(){}return t.prototype.init=function(){this._wrapper=document.getElementById("debug"),this._btn1=document.createElement("div"),this._btn1.style.position="absolute",this._btn1.style.width="15px",this._btn1.style.height="15px",this._btn1.style.top="10px",this._btn1.style.right="10px",this._btn1.style.backgroundColor="#ff0000",this._wrapper.appendChild(this._btn1),this._btn1.addEventListener("click",function(){_main.test1()}),this._btn2=document.createElement("div"),this._btn2.style.position="absolute",this._btn2.style.width="15px",this._btn2.style.height="15px",this._btn2.style.top="10px",this._btn2.style.right="40px",this._btn2.style.backgroundColor="#ffff00",this._wrapper.appendChild(this._btn2),this._btn2.addEventListener("click",function(){_main.test2()})},t}(),DetailBg=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){"PC"===_main._device||"TB"===_main._device?(this._width=1280,this._height=720):(this._width=750,this._height=1340)},t.prototype.createPlane=function(){var t;this._g=new THREE.PlaneGeometry(this._width,this._height),t="PC"===_main._device?_main._parts.getTex("image/detail/detailBg_pc.png"):_main._parts.getTex("image/detail/detailBg_sp.png"),this._yZone=1.1,this._shiftUX=.2,this._whitePMax=.18,this._whiteP=0,"SP"===_main._device&&(this._yZone=.8,this._shiftUX=.4,this._whiteP=.2),this._shader={vertexShader:_main._parts.getShader("shader/detailBg_vtx.js"),fragmentShader:_main._parts.getShader("shader/detailBg_frg.js"),uniforms:{texture:{value:t},noise:{value:_main._world._noise._render.texture},yZone:{value:this._yZone},whiteP:{value:this._whiteP},shiftUX:{value:this._shiftUX}},transparent:!0},this._m=new THREE.ShaderMaterial(this._shader),this._mesh=new THREE.Mesh(this._g,this._m),_main._world._scene.add(this._mesh),this._mesh.scale.set(.2,.2,.2)},t.prototype.contentsStart=function(){this._mesh.scale.set(1,1,1),this._mesh.parent&&_main._world._scene.remove(this._mesh),_main.addResize(this),this.onResize()},t.prototype.show=function(){this._mesh.parent||_main._world._scene.add(this._mesh),_main._world._noise.detailOpen(!0),_main._fps=0,_main.isHalf=!0,_main.removeEnterFrame(this),_main.addEnterFrame(this,"showFrame")},t.prototype.hide=function(){this._mesh.parent&&_main._world._scene.remove(this._mesh),_main.isHalf=!1,_main._world._noise.detailOpen(!1),_main.removeEnterFrame(this),_main.addEnterFrame(this,"hideFrame")},t.prototype.showFrame=function(){this._whiteP=this._whiteP*_main._conf.s098a+this._whitePMax*_main._conf.s098b,this._shader.uniforms.whiteP.value=this._whiteP,Math.abs(this._whiteP-this._whitePMax)<.002&&(_main.removeEnterFrame(this),this._whiteP=this._whitePMax,this._shader.uniforms.whiteP.value=this._whitePMax)},t.prototype.hideFrame=function(){this._whiteP=this._whiteP*_main._conf.s095a+0*_main._conf.s095b,this._shader.uniforms.whiteP.value=this._whiteP,Math.abs(this._whiteP-0)<.002&&(_main.removeEnterFrame(this),this._whiteP=0,this._shader.uniforms.whiteP.value=0)},t.prototype.onResize=function(){var t=window.innerWidth/this._width,e=window.innerHeight/this._height;this._resizeScale=t>e?t:e,this._mesh.scale.x=this._resizeScale,this._mesh.scale.y=this._resizeScale},t}(),DetailSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this.isOpen=!1,this.isFabric=!1;this.isFix=!1,this._wrapper=document.getElementById("detail-wrapper"),this._detail=document.getElementById("detail"),this._bg=document.getElementById("detail-bg"),this._world=document.getElementById("world-in"),this._image=document.getElementById("dt-image"),this._imageName=document.getElementById("dt-image-name"),this._title=document.getElementById("dt-title-set"),this._txt=document.getElementById("dt-ex"),this._view=document.getElementById("dt-view"),this._seide=document.getElementById("detail-side"),this._ui=document.getElementById("dt-image-ui"),this._uiLeft=document.getElementById("dt-arrow-l"),this._uiRight=document.getElementById("dt-arrow-r"),"PC"===_main._device?this._close=document.getElementById("dt-close"):(this._spHeader=document.getElementById("detail-side-sp"),this._close=document.getElementById("dt-close-sp"));var t=this;this._close.addEventListener("click",function(){t.closeDetail()});var e=$("#dt-view").children("div");TweenMax.killTweensOf(e[0]),TweenMax.killTweensOf(e[1]),TweenMax.killTweensOf(e[2]),TweenMax.killTweensOf(e[3]),"PC"===_main._device?(this._view.addEventListener("mouseenter",function(e){t.viewOver(e)},!1),this._view.addEventListener("mouseleave",function(e){t.viewOut(e)},!1),this._close.addEventListener("mouseenter",function(e){TweenMax.killTweensOf(t._close),TweenMax.to(t._close,.2,{opacity:.5})},!1),this._close.addEventListener("mouseleave",function(e){TweenMax.killTweensOf(t._close),TweenMax.to(t._close,.2,{opacity:1})},!1)):this.swipeInit(),this._detailBC=new Beacon,this._detailCount=0,this._cateFromMenu=0,this._idFromMenu=0,this._imageList=[],this._imageInfo=[],"PC"===_main._device?(this._imageMargin=Math.ceil(.84*window.innerHeight),_main.addResize(this),this.onResize()):"SP"===_main._device?this._imageMargin=240:this._imageMargin=460,this._uiLeft.addEventListener("click",function(){t.slideLeft()}),this._uiRight.addEventListener("click",function(){t.slideRight()}),this.isSlideEnable=!0,this._slideBC=new Beacon,this._slideWait=0,"TB"===_main._device&&(TweenMax.set($("#dt-title-set"),{width:"60%",left:"20%"}),TweenMax.set($("#dt-image-ui"),{width:"60%",marginLeft:"-30%"}),TweenMax.set($("#dt-image"),{height:"489px"}),TweenMax.set($("#dt-image-name"),{top:"610px"}),TweenMax.set($("#dt-image-ui"),{top:"460px"})),this._wheelEnable=!1,this._loader=new DetailImageLoader,this._bgGL=new DetailBg},t.prototype.viewOver=function(t){var e=$("#dt-view");TweenMax.to(e,.2,{ease:Power4.easeOut,backgroundColor:"rgba(255,255,255,0.2)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"100%"}),TweenMax.to(i[3],.15,{x:"100%",delay:.12}),TweenMax.to(i[2],.12,{y:"-100%"}),TweenMax.to(i[1],.15,{x:"-100%",delay:.12}))},t.prototype.viewOut=function(t){var e=$("#dt-view");TweenMax.to(e,.2,{backgroundColor:"rgba(255,255,255,0.0)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"0%",delay:.15}),TweenMax.to(i[3],.15,{x:"0%"}),TweenMax.to(i[2],.12,{y:"0%",delay:.15}),TweenMax.to(i[1],.15,{x:"0%"}))},t.prototype.showFromMenu=function(t,e){this._detailBC.clear(),this._detailCount=0,this._cateFromMenu=t,this._idFromMenu=e,this._detailBC.set(this,"showFromMenuFrame")},t.prototype.showFromMenuFrame=function(){this._detailCount++,this._detailCount>100&&(this._detailBC.clear(),this._detailCount=0,this.show(this._cateFromMenu,this._idFromMenu))},t.prototype.show=function(t,e){this.isOpen=!0,this._data=_main._info.getData(t,e),_main._world.pause(!0),5===t?(this.isFabric=!0,"PC"===_main._device?this._image.style.left="0%":($("#dt-sep").css({top:"160px"}),this._image.style.width="100%",this._image.style.height="100%",this._image.style.top="0px",this._image.style.left="0px",this._image.style.marginLeft="0"),TweenMax.set(this._view,{backgroundImage:"url(image/detail/view_fab.png)"})):(this.isFabric=!1,"PC"===_main._device?this._image.style.left="0%":"SP"===_main._device?($(".dt-sep").css({top:"396px"}),this._image.style.width="100%",this._image.style.height="326px",this._image.style.top="155px"):"TB"===_main._device&&($(".dt-sep").css({top:"580px"}),this._image.style.width="100%",this._image.style.height="489px",this._image.style.top="155px"),TweenMax.set(this._view,{backgroundImage:"url(image/detail/view.png)"})),"PC"===_main._device?document.getElementById("dt-side-name-in").innerHTML=String('CATEGORY <span class="side-sq"><span class="side-sq-in"></span></span> '+this._data.items[0].category):document.getElementById("dt-side-name-sp").innerHTML=String(this._data.items[0].category);var i,s=this;i="PC"===_main._device?1.2:.9,TweenMax.killTweensOf(this._detail),TweenMax.set(this._detail,{x:"100%"}),TweenMax.set(this._wrapper,{display:"block"}),TweenMax.to(this._detail,i,{ease:Power3.easeInOut,x:"0%",onComplete:function(){s.animFix()}}),TweenMax.killTweensOf(this._world),TweenMax.to(this._world,i,{ease:Power3.easeInOut,x:"-50%"}),this._loader.addLoader(this._detail,this.isFabric)},t.prototype.animFix=function(){var t=this;document.getElementById("dt-t-c").innerHTML=this._data.items[0].category,document.getElementById("dt-t-n").innerHTML=this._data.items[0].name_en,document.getElementById("dt-t-j").innerHTML=this._data.items[0].name_ja,document.getElementById("dt-ex").innerHTML=this._data.items[0].text,document.getElementById("dt-image-name").innerHTML=this._data.items[0].p_name;var e=document.getElementById("dt-view-link");e.href=this._data.items[0].link,e.onclick=function(){_main.sendGA(t._data.items[0].gtag)},this._loadNum=0,this._imgList=[];for(var i=0;i<this._data.items.length;i++){this._imgList.push(this._data.items[i].p_image);var s=new Image;s.onload=function(){t.loadCheck()},s.src=this._data.items[i].p_image}"PC"!==_main._device&&(this.isFabric||("PC"!==_main._device&&(this._wrapper.style.position="absolute"),document.body.style.overflowY="visible"),this._bg.style.display="block"),"PC"!==_main._device&&(TweenMax.killTweensOf(this._spHeader),TweenMax.set(this._spHeader,{display:"block",opacity:0}),TweenMax.to(this._spHeader,.3,{delay:.1,opacity:1}))},t.prototype.glBgOn=function(){_main._world.pause(!1),_main._world._dummy.renderEnable(!1),TweenMax.set($("#logo"),{display:"none"}),TweenMax.set($("#ui-set"),{display:"none"}),TweenMax.set($("#arrow-set"),{display:"none"}),TweenMax.set($("#btn-stage"),{display:"none"});var t=_main._world._roomNavi._mTitle._loader;TweenMax.killTweensOf(t),TweenMax.set(t,{opacity:0}),_main._world._naviImage.visibleFromDetail(!1),this._bgGL.show(),this._bg.style.display="none",TweenMax.killTweensOf(this._detail),TweenMax.to(this._detail,.3,{backgroundColor:"rgba(45,7,58,0)"}),TweenMax.killTweensOf(this._world),TweenMax.set(this._world,{x:"0%"})},t.prototype.glBgOff=function(t){if(this.isFabric)return TweenMax.set($("#logo"),{display:"block"}),TweenMax.set($("#ui-set"),{display:"block"}),TweenMax.set($("#arrow-set"),{display:"block"}),void TweenMax.set($("#btn-stage"),{display:"block"});var e=this;_main._world.pause(!0),_main._world._dummy.renderEnable(!0),"btn"===t?(TweenMax.killTweensOf(this._detail),TweenMax.to(this._detail,.15,{backgroundColor:"rgba(45,7,58,1)",onComplete:function(){e._bgGL.hide(),TweenMax.killTweensOf(e._world),TweenMax.set(e._world,{x:"-50%"}),TweenMax.set($("#logo"),{display:"block"}),TweenMax.set($("#ui-set"),{display:"block"}),TweenMax.set($("#arrow-set"),{display:"block"}),TweenMax.set($("#btn-stage"),{display:"block"}),_main._world._naviImage.visibleFromDetail(!0)}})):"menu"===t&&(TweenMax.killTweensOf(this._detail),TweenMax.set(this._detail,{backgroundColor:"rgba(45,7,58,1)"}),this._bgGL.hide(),TweenMax.killTweensOf(this._world),TweenMax.set(this._world,{x:"0%"}),TweenMax.set($("#logo"),{display:"block"}),TweenMax.set($("#ui-set"),{display:"block"}),TweenMax.set($("#arrow-set"),{display:"block"}),TweenMax.set($("#btn-stage"),{display:"block"}),_main._world._naviImage.visibleFromDetail(!0))},t.prototype.loadCheck=function(){this._loadNum++,this._loadNum>=this._imgList.length&&this.infoShow()},t.prototype.infoShow=function(){"PC"===_main._device&&this.onResize();var t,e=this;this.isFix=!0,TweenMax.killTweensOf(this._title),TweenMax.set(this._title,{display:"block",opacity:0}),TweenMax.to(this._title,2.5,{ease:Power3.easeOut,opacity:1}),TweenMax.killTweensOf(this._txt),TweenMax.set(this._txt,{display:"block",opacity:0}),TweenMax.to(this._txt,2.5,{ease:Power3.easeOut,opacity:1,delay:0}),TweenMax.killTweensOf(this._view),TweenMax.set(this._view,{display:"block",opacity:0}),TweenMax.to(this._view,2.5,{ease:Power3.easeOut,opacity:1,delay:0}),t=this._data.items.length<=1||this._data.items.length>=4?this._data.items.length:2*this._data.items.length;for(var i=0;i<t;i++)this._imageInfo.push(this._data.items[i%this._data.items.length]);var s=this._imageInfo.pop();this._imageInfo.unshift(s);for(i=0;i<this._imageInfo.length;i++){var a=document.createElement("div");"TB"===_main._device?a.className="dt-image-gene-tb":a.className="dt-image-gene",a.style.backgroundImage="url("+this._imageInfo[i].p_image+")",this.isFabric?"PC"===_main._device?(a.style.left="0%",a.style.backgroundSize="cover"):(a.style.left="0%",a.style.width="100%",a.style.height="100%",a.style.backgroundSize="cover",a.style.marginLeft="0"):a.style.backgroundSize="contain",this._image.appendChild(a),this._imageInfo.length>1&&(TweenMax.set(a,{x:this._imageMargin*i-this._imageMargin}),1!==i&&TweenMax.set(a,{opacity:.2})),this._imageList.push(a)}this._data.items.length>1?(TweenMax.killTweensOf(this._ui),TweenMax.set(this._ui,{display:"block",opacity:0}),TweenMax.to(this._ui,3,{ease:Power3.easeOut,opacity:1,delay:2}),TweenMax.killTweensOf(this._imageName),TweenMax.set(this._imageName,{display:"block",opacity:0}),TweenMax.to(this._imageName,2.5,{ease:Power3.easeOut,opacity:1,delay:0,onComplete:function(){e._wheelEnable=!0}})):(TweenMax.killTweensOf(this._imageName),TweenMax.set(this._imageName,{display:"block",opacity:0}),TweenMax.to(this._imageName,2.5,{ease:Power3.easeOut,opacity:1,delay:0})),this.isFabric?(TweenMax.set(this._image,{display:"block",opacity:0,scale:1.08}),TweenMax.to(this._image,3,{ease:Power3.easeInOut,opacity:1,scale:1,delay:.4})):(TweenMax.set(this._image,{display:"block",opacity:0,scale:.92}),TweenMax.to(this._image,2.5,{ease:Power3.easeInOut,opacity:1,scale:1,delay:.4})),"PC"!==_main._device&&this.swipeCheck(),this._loader.removeLoader(),this.isFabric||this.glBgOn()},t.prototype.slideLeft=function(){if(this.isSlideEnable){this.isSlideEnable=!1;var t=this._imageList[this._imageList.length-1];TweenMax.killTweensOf(t),TweenMax.set(t,{x:2*-this._imageMargin});var e=this._imageList.pop();this._imageList.unshift(e);var i=this._imageInfo.pop();this._imageInfo.unshift(i);for(var s=0;s<this._imageList.length;s++){var a=this._imageMargin*s-this._imageMargin,n=.2;1===s&&(n=1),TweenMax.killTweensOf(this._imageList[s]),TweenMax.to(this._imageList[s],1,{ease:Power3.easeOut,x:a,opacity:n})}var h=this,o=document.getElementById("dt-image-name");TweenMax.killTweensOf(o),TweenMax.to(o,.2,{opacity:0}),TweenMax.killTweensOf(this._title),TweenMax.to(this._title,.3,{x:50,opacity:0,onComplete:function(){var t=document.getElementById("dt-t-c");TweenMax.killTweensOf(t),TweenMax.set(t,{opacity:0}),t.innerHTML=h._imageInfo[1].category;var e=document.getElementById("dt-t-n");TweenMax.killTweensOf(e),TweenMax.set(e,{opacity:0}),e.innerHTML=h._imageInfo[1].name_en;var i=document.getElementById("dt-t-j");TweenMax.killTweensOf(i),TweenMax.set(i,{opacity:0}),i.innerHTML=h._imageInfo[1].name_ja;var s=document.getElementById("dt-ex");TweenMax.killTweensOf(s),TweenMax.set(s,{opacity:0}),s.innerHTML=h._imageInfo[1].text;var a=document.getElementById("dt-image-name");TweenMax.killTweensOf(a),TweenMax.set(a,{opacity:0}),a.innerHTML=h._imageInfo[1].p_name;var n=document.getElementById("dt-view");TweenMax.killTweensOf(n),TweenMax.set(n,{opacity:0});var o=document.getElementById("dt-view-link");o.href=h._imageInfo[1].link,o.onclick=function(){_main.sendGA(h._imageInfo[1].gtag)},TweenMax.set(h._title,{x:-50,opacity:1}),TweenMax.to(h._title,1,{ease:Power3.easeOut,x:0,delay:.2}),TweenMax.to(t,.5,{ease:Power3.easeIn,opacity:1,delay:0}),TweenMax.to(e,.5,{ease:Power3.easeIn,opacity:1,delay:.05}),TweenMax.to(i,.5,{ease:Power3.easeIn,opacity:1,delay:.1}),TweenMax.to(s,.5,{ease:Power3.easeIn,opacity:1,delay:.15}),TweenMax.to(a,.5,{ease:Power3.easeIn,opacity:1,delay:.2}),TweenMax.to(n,.5,{ease:Power3.easeIn,opacity:1,delay:.25})}}),this._slideWait=0,this._slideBC.clear(),this._slideBC.set(this,"slideWaitFrame")}},t.prototype.slideRight=function(){if(this.isSlideEnable){this.isSlideEnable=!1;for(var t=0;t<this._imageList.length;t++){var e=this._imageMargin*t-2*this._imageMargin,i=.2;2===t&&(i=1),TweenMax.killTweensOf(this._imageList[t]),TweenMax.to(this._imageList[t],1,{ease:Power3.easeOut,x:e,opacity:i})}if("PC"===_main._device){var s=this._imageList[this._imageList.length-1];this.checkX(s.style.transform)<-this._imageMargin&&TweenMax.set(s,{x:3.5*this._imageMargin})}else{s=this._imageList[this._imageList.length-1];this.checkX(s.style.transform)<-300&&TweenMax.set(s,{x:600})}var a=this._imageList.shift();this._imageList.push(a);var n=this._imageInfo.shift();this._imageInfo.push(n);var h=this,o=document.getElementById("dt-image-name");TweenMax.killTweensOf(o),TweenMax.to(o,.2,{opacity:0}),TweenMax.killTweensOf(this._title),TweenMax.to(this._title,.3,{x:-50,opacity:0,onComplete:function(){var t=document.getElementById("dt-t-c");TweenMax.killTweensOf(t),TweenMax.set(t,{opacity:0}),t.innerHTML=h._imageInfo[1].category;var e=document.getElementById("dt-t-n");TweenMax.killTweensOf(e),TweenMax.set(e,{opacity:0}),e.innerHTML=h._imageInfo[1].name_en;var i=document.getElementById("dt-t-j");TweenMax.killTweensOf(i),TweenMax.set(i,{opacity:0}),i.innerHTML=h._imageInfo[1].name_ja;var s=document.getElementById("dt-ex");TweenMax.killTweensOf(s),TweenMax.set(s,{opacity:0}),s.innerHTML=h._imageInfo[1].text;var a=document.getElementById("dt-image-name");TweenMax.killTweensOf(a),TweenMax.set(a,{opacity:0}),a.innerHTML=h._imageInfo[1].p_name;var n=document.getElementById("dt-view");TweenMax.killTweensOf(n),TweenMax.set(n,{opacity:0});var o=document.getElementById("dt-view-link");o.href=h._imageInfo[1].link,o.onclick=function(){_main.sendGA(h._imageInfo[1].gtag)},TweenMax.set(h._title,{x:50,opacity:1}),TweenMax.to(h._title,1,{ease:Power3.easeOut,x:0,delay:.2}),TweenMax.to(t,.5,{ease:Power3.easeIn,opacity:1,delay:0}),TweenMax.to(e,.5,{ease:Power3.easeIn,opacity:1,delay:.05}),TweenMax.to(i,.5,{ease:Power3.easeIn,opacity:1,delay:.1}),TweenMax.to(s,.5,{ease:Power3.easeIn,opacity:1,delay:.15}),TweenMax.to(a,.5,{ease:Power3.easeIn,opacity:1,delay:.2}),TweenMax.to(n,.5,{ease:Power3.easeIn,opacity:1,delay:.25})}}),this._slideWait=0,this._slideBC.clear(),this._slideBC.set(this,"slideWaitFrame")}},t.prototype.slideWaitFrame=function(){this._slideWait++,this._slideWait>=10&&(this._slideWait=0,this._slideBC.clear(),this.isSlideEnable=!0)},t.prototype.checkX=function(t){var e,i;return-1!==t.indexOf("matrix")?i=(e=(e=(e=t.split("(")[1]).split(")")[0]).split(", "))[4]:-1!==t.indexOf("translate3d")&&(e=(e=(e=t.split("(")[1]).split(", ")[0]).split("px"),i=Math.ceil(parseInt(e[0]))),i},t.prototype.closeDetail=function(){var t=this;this.isFix&&(this.isOpen=!1,this.glBgOff("btn"),this._bg.style.display="none",TweenMax.killTweensOf(this._title),TweenMax.killTweensOf(this._txt),TweenMax.killTweensOf(this._view),TweenMax.killTweensOf(this._imageName),TweenMax.killTweensOf(this._image),TweenMax.killTweensOf(this._ui),TweenMax.to(this._title,.2,{opacity:0}),TweenMax.to(this._txt,.2,{opacity:0}),TweenMax.to(this._view,.2,{opacity:0}),TweenMax.to(this._imageName,.2,{opacity:0}),TweenMax.to(this._image,.2,{opacity:0,onComplete:function(){"PC"!==_main._device&&(t._wrapper.style.position="fixed"),t.deleteDetail()}}),TweenMax.to(this._ui,.2,{opacity:0,onComplete:function(){TweenMax.set(t._ui,{display:"none"})}}),this.isFix=!1,"PC"!==_main._device&&(TweenMax.killTweensOf(this._spHeader),TweenMax.to(this._spHeader,.2,{opacity:0,onComplete:function(){TweenMax.set(t._spHeader,{display:"none"})}}),this.swipeCheck(),document.body.style.overflowY="hidden"),this._slideWait=0,this._slideBC.clear(),this.swipeStop(),this._wheelEnable=!1)},t.prototype.deleteDetail=function(){for(var t=0;t<this._imageList.length;t++)this._image.removeChild(this._imageList[t]);var e;this._imageList=[],this._imageInfo=[],_main._world.pause(!1),e="PC"===_main._device?1:.8,TweenMax.killTweensOf(this._world),TweenMax.to(this._world,e,{ease:Power2.easeInOut,x:"0%"});var i=this;TweenMax.killTweensOf(this._detail),TweenMax.to(this._detail,e,{ease:Power2.easeInOut,x:"100%",onComplete:function(){TweenMax.set(i._wrapper,{display:"none"})}})},t.prototype.clearFromMenu=function(){this.isOpen=!1,this.isFix=!1,this.glBgOff("menu"),this._slideWait=0,this._slideBC.clear();for(var t=0;t<this._imageList.length;t++)this._image.removeChild(this._imageList[t]);this._imageList=[],this._imageInfo=[],this._bg.style.display="none",TweenMax.killTweensOf(this._title),TweenMax.killTweensOf(this._txt),TweenMax.killTweensOf(this._view),TweenMax.killTweensOf(this._imageName),TweenMax.killTweensOf(this._image),TweenMax.killTweensOf(this._detail),TweenMax.killTweensOf(this._ui),TweenMax.set(this._ui,{display:"none",opacity:0}),TweenMax.set(this._title,{opacity:0}),TweenMax.set(this._txt,{opacity:0}),TweenMax.set(this._view,{opacity:0}),TweenMax.set(this._imageName,{opacity:0}),TweenMax.set(this._image,{opacity:0}),"PC"!==_main._device&&(TweenMax.killTweensOf(this._spHeader),TweenMax.set(this._spHeader,{display:"none"})),TweenMax.set(this._wrapper,{display:"none"}),this.swipeStop(),this._wheelEnable=!1},t.prototype.swipeInit=function(){this.isSwipeDown=!1,this._swipeZone=document.getElementById("dt-swipe"),this._swX1=0,this._swX2=0,this._swX2old=0,this._swY1=0,this._swY2=0,this._swDX=0,this._swDY=0,this._swStartX=0,this._swStartY=0;var t=this;this._swipeZone.addEventListener("touchstart",function(e){t.swipeDown(e)},!1),this._swipeZone.addEventListener("touchmove",function(e){t.swipeMove(e)},!1),this._swipeZone.addEventListener("touchend",function(e){t.swipeUp(e)},!1)},t.prototype.swipeCheck=function(){this.isSwipeDown=!1,"PC"!==_main._device&&this._data.items.length>1?this._swipeZone.style.display="block":this._swipeZone.style.display="none"},t.prototype.swipeStop=function(){"PC"!==_main._device&&(this.isSwipeDown=!1,this._swipeZone.style.display="none")},t.prototype.swipeDown=function(t){t.preventDefault(),this.isSwipeDown=!0;var e=t.touches;this._swX1=this._swX2=e[0].clientX,this._swY1=this._swY2=e[0].clientY,this._swStartX=e[0].clientX,this._swStartY=e[0].clientY},t.prototype.swipeMove=function(t){var e=t.touches;this._swX2=e[0].clientX,this._swY2=e[0].clientY,this.isSwipeDown&&(this._swDX=this._swX2-this._swX1,this._swDY=this._swY2-this._swY1)},t.prototype.swipeUp=function(t){var e;e=Math.abs(this._swStartX-this._swX2),Math.abs(this._swStartY-this._swY2),this._swX2,this._swY2,e>=20&&(this._swX2>this._swStartX?this.slideLeft():this.slideRight()),this.isSwipeDown=!1},t.prototype.checkWheel=function(t){this._wheelEnable&&"PC"===_main._device&&this._data.items.length>1&&(t>=0?this.slideLeft():this.slideRight())},t.prototype.onResize=function(){if("PC"===_main._device){if(this._imageMargin=Math.ceil(.84*window.innerHeight),this._imageMargin<=600&&(this._imageMargin=600),window.innerHeight>=800&&this._imageList.length>1)for(var t=0;t<this._imageList.length;t++){var e=this._imageMargin*t-this._imageMargin;TweenMax.killTweensOf(this._imageList[t]),TweenMax.set(this._imageList[t],{x:e})}var i=Math.ceil(.95*window.innerHeight);i<=700&&(i=700);var s=Math.floor(.5*i);TweenMax.set(this._ui,{width:i+"px",marginLeft:-s+"px"})}},t}(),DetailImageLoader=function(){function t(){this.init()}return t.prototype.init=function(){this._target=null,this._wrapper=document.createElement("div"),this._wrapper.style.position="absolute",this._wrapper.style.width="44px",this._wrapper.style.height="44px",this._gra=document.createElement("div"),this._gra.className="sabloader-img",this._wrapper.appendChild(this._gra)},t.prototype.addLoader=function(t,e){TweenMax.killTweensOf(this._wrapper),TweenMax.set(this._wrapper,{scale:.9,display:"block",opacity:1}),this._target=t,this._target.appendChild(this._wrapper),this._wrapper.style.left="50%",this._wrapper.style.top="50%",this._wrapper.style.marginLeft="-22px",this._wrapper.style.marginHeight="-22px",TweenMax.killTweensOf(this._gra),TweenMax.set(this._gra,{rotation:0}),TweenMax.to(this._gra,.5,{rotation:360,repeat:-1})},t.prototype.removeLoader=function(){if(null!==this._target){var t=this;TweenMax.killTweensOf(this._wrapper),TweenMax.to(this._wrapper,.4,{opacity:0,onComplete:function(){TweenMax.killTweensOf(t._gra),TweenMax.set(t._wrapper,{display:"none",opacity:0}),$(t._wrapper).parent()&&t._target.removeChild(t._wrapper)}})}},t}(),DisplaySet=function(){"use strict";function t(t){this._parent=t,this.init()}return t.prototype.init=function(){this._renderW=_main._world._renderW,this._renderH=_main._world._renderH;var t=new THREE.PlaneGeometry(this._renderW,this._renderH,2,2);this._time=0,this._speed=1,this._strength=0,this._size=8,this._alpha=1,this._shader={vertexShader:_main._parts.getShader("shader/display_vtx.js"),fragmentShader:_main._parts.getShader("shader/display_frg.js"),uniforms:{texture:{value:_main._world._dummy._render.texture},time:{value:this._time},speed:{value:this._speed},strength:{value:this._strength},size:{value:this._size},alpha:{value:this._alpha}}};var e=new THREE.ShaderMaterial(this._shader);this._mesh=new THREE.Mesh(t,e),this._mesh.position.z=0,this._parent._scene.add(this._mesh)},t.prototype.effectStart=function(){this._time=0,"opening"===_main._sceneMng._status?this._strength=.01:this._strength=.1,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,_main.removeEnterFrame(this),_main.addEnterFrame(this,"effectFrame")},t.prototype.effectFrame=function(){this._strength=this._strength*_main._conf.s095a+0*_main._conf.s095b,this._shader.uniforms.strength.value=this._strength,Math.abs(this._strength-0)<2e-4&&(_main.removeEnterFrame(this),this._strength=0,this._shader.uniforms.strength.value=this._strength)},t.prototype.selectEffect=function(){this._sSin=0,this._sSinCount=0,this._time=0,this._shader.uniforms.time.value=this._time,this._shader.uniforms.strength.value=this._strength,_main.removeEnterFrame(this),_main.addEnterFrame(this,"selectEffectFrame")},t.prototype.selectEffectFrame=function(){this._sSinCount+=6,this._sSinCount>=360&&(this._sSinCount=360),this._sSin=.0122*Math.sin(this._sSinCount*Math.PI/180),this._strength=this._strength*_main._conf.s095a+this._sSin*_main._conf.s095b,this._shader.uniforms.strength.value=this._strength,Math.abs(this._strength-0)<2e-4&&this._sSinCount>=360&&(_main.removeEnterFrame(this),this._strength=0,this._shader.uniforms.strength.value=this._strength)},t}(),DummyScene=function(){"use strict";function t(){this.isNight=!1,this._width=0,this._height=0,this._render=null,this._scene=null,"SP"!==_main._device?this._fovMin=80:this._fovMin=82,this._fovMax=120,this._cam=null,this._fov=this._fovMin,this._far=1e4,this._near=.1}return t.prototype.init=function(){this._width=_main._world._renderW,this._height=_main._world._renderH,this._cam=new THREE.PerspectiveCamera(this._fov,this._width/this._height,this._near,this._far),this._cam.position.x=0,this._cam.position.y=0,this._cam.position.z=0,this._scene=new THREE.Scene,this._render=new THREE.WebGLRenderTarget(_main._world._renderW,_main._world._renderH,{magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter,wrapS:THREE.ClampToEdgeWrapping,wrapT:THREE.ClampToEdgeWrapping}),this._pattarn=new BgPattarn(this),this._pattarn.init(),this._sphere=new SphereSet(this),this._sphere.init(),this._particle=new ParticleSet(this),this._particle.init(),_main.addEnterFrame(this,"enterFrame"),this._bc=new Beacon},t.prototype.contentsStart=function(){this._pattarn.contentsStart(),this._sphere.contentsStart()},t.prototype.clickBg=function(t){var e=new THREE.Vector3;e.x=t.mouseX/window.innerWidth*2-1,e.y=-t.mouseY/window.innerHeight*2-1,e.z=1,this._sphere.clickBg(e.x,e.y),this.changeFov()},t.prototype.roomToRoom=function(){this._sphere.roomToRoom(),this._cam.fov=140,this._cam.updateProjectionMatrix(),this.changeFov()},t.prototype.changeFov=function(){this._bc.clear(),this._bc.set(this,"fovFrame")},t.prototype.fovFrame=function(){var t=this._fovMin;this._cam.fov=this._cam.fov*_main._conf.s094a+t*_main._conf.s094b,this._cam.updateProjectionMatrix(),Math.abs(this._cam.fov-t)<.1&&(this._bc.clear(),this._cam.fov=t,this._cam.updateProjectionMatrix())},t.prototype.enterFrame=function(){_main._world._render.render(this._scene,this._cam,this._render)},t.prototype.renderEnable=function(t){this._pattarn.renderEnable(t),_main.removeEnterFrame(this),t&&_main.addEnterFrame(this,"enterFrame")},t.prototype.onResize=function(){this._width=_main._world._renderW,this._height=_main._world._renderW,this._render.setSize(_main._world._renderW,_main._world._renderH),this._cam.aspect=this._width/this._height,this._cam.updateProjectionMatrix()},t}(),FinishSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._light=.22,this._wBC=new Beacon,this._whiteP=this._light,this._whiteTrg=0,this._scrollX=0,this._renderW=_main._world._renderW,this._renderH=_main._world._renderH;var t=new THREE.PlaneGeometry(this._renderW,this._renderH,2,2);this._shader={vertexShader:_main._parts.getShader("shader/finish_vtx.js"),fragmentShader:_main._parts.getShader("shader/finish_frg.js"),uniforms:{texture:{value:_main._world._post._render.texture},noiseTex:{value:_main._world._noise._render.texture},th:{value:.006},tv:{value:.006},tr:{value:.5},whiteP:{value:this._whiteP+.1},scrollX:{value:this._scrollX}}};var e=new THREE.ShaderMaterial(this._shader);this._mesh=new THREE.Mesh(t,e),_main._world._scene.add(this._mesh),_main.addResize(this),this.onResize()},t.prototype.contentsStart=function(){_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")},t.prototype.changeWhite=function(t){this._wBC.clear(),"strong"===t?this._whiteTrg=.8:"normal"===t&&(this._whiteTrg=this._light),this._wBC.set(this,"whiteFrame")},t.prototype.whiteFrame=function(){this._whiteP=this._whiteP*_main._conf.s098a+this._whiteTrg*_main._conf.s098b,this._shader.uniforms.whiteP.value=this._whiteP,Math.abs(this._whiteP-this._whiteTrg)<.002&&(this._whiteP=this._whiteTrg,this._shader.uniforms.whiteP.value=this._whiteP,this._wBC.clear())},t.prototype.waveWhite=function(){this._wBC.clear(),this._waveCount=0,this._wBC.set(this,"waveWhiteFrame")},t.prototype.waveWhiteFrame=function(){this._waveCount=this._waveCount*_main._conf.s095a+Math.PI*_main._conf.s095b;var t=Math.sin(this._waveCount);_main._world._noise.waveWhite(t);var e=.5*t+this._light;this._shader.uniforms.whiteP.value=e,Math.abs(this._waveCount-Math.PI)<.001&&(this._wBC.clear(),this._shader.uniforms.whiteP.value=this._light,this._waveCount=0)},t.prototype.enterFrame=function(){var t=Math.abs(70*_main._world._dummy._sphere._saR);this._scrollX=this._scrollX*_main._conf.s099a+t*_main._conf.s099b,this._scrollX>=2.4?this._scrollX=2.4:this._scrollX<=1.2&&(this._scrollX=1.2),this._shader.uniforms.scrollX.value=this._scrollX},t.prototype.onResize=function(){var t=window.innerWidth/this._renderW,e=window.innerHeight/this._renderH;t>e?(this._mesh.scale.x=t,this._mesh.scale.y=t):(this._mesh.scale.x=e,this._mesh.scale.y=e)},t}(),FocusCheck=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){var t=this;"Android"===_main._ua.OS?document.addEventListener("visibilitychange",function(){document.hidden?t.setWinFocus(!1):t.setWinFocus(!0)},!1):(window.onfocus=function(){t.setWinFocus(!0)},window.onblur=function(){t.setWinFocus(!1)})},t.prototype.setWinFocus=function(t){_main._sound&&_main._sound.setFocus(t)},t}(),GLCoverSet=function(){"use strict";function t(){this.init()}return t.prototype.init=function(){this._g=new THREE.PlaneGeometry(1600,900,1,1),this._m=new THREE.MeshBasicMaterial({transparent:!0,color:4132425,opacity:.2}),this._mesh=new THREE.Mesh(this._g,this._m),_main._world._scene.add(this._mesh),_main.addResize(this),this.onResize()},t.prototype.openingEnd=function(){_main.removeEnterFrame(),_main.addEnterFrame(this,"enterFrame")},t.prototype.enterFrame=function(){this._m.opacity=this._m.opacity*_main._conf.s099a+.35*_main._conf.s099b,Math.abs(.35-this._m.opacity)<.01&&(_main.removeEnterFrame(),this._m.opacity=.35)},t.prototype.onResize=function(){var t=window.innerWidth/1600,e=window.innerHeight/900;t>e?(this._mesh.scale.x=t,this._mesh.scale.y=t):(this._mesh.scale.x=e,this._mesh.scale.y=e)},t}(),HowtoSet=function(){"use strict";function t(){this._wrapper=document.getElementById("first-attention"),this._wait=0,this.isFirst=!0}return t.prototype.show=function(){this.isFirst&&(this.isFirst=!1,this.isCookie=!1,null!=Cookies.get("liberty-howto")?1==parseInt(Cookies.get("liberty-howto"))&&(this.isCookie=!0):Cookies.set("liberty-howto",1,{expires:180}),this.isCookie?document.body.removeChild(this._wrapper):("PC"===_main._device?(this._bar=document.getElementById("fa-pc-bar"),TweenMax.killTweensOf(this._bar),TweenMax.to(this._bar,.3,{y:"4px",repeat:-1,yoyo:!0})):this.spAnim1(),TweenMax.set(this._wrapper,{display:"block",opacity:0,scale:1.2}),TweenMax.to(this._wrapper,1.1,{ease:Power3.easeOut,opacity:1,scale:1}),_main.removeEnterFrame(this),_main.addEnterFrame(this,"enterFrame")))},t.prototype.spAnim1=function(){var t=this;this._bar=document.getElementById("fa-sp-fin"),this._line=document.getElementById("fa-sp-line"),TweenMax.killTweensOf(this._bar),TweenMax.killTweensOf(this._line),TweenMax.set(this._bar,{x:-16}),TweenMax.set(this._line,{x:-16,marginLeft:"-40px",opacity:0}),TweenMax.to(this._line,.7,{x:16,opacity:.4}),TweenMax.to(this._bar,.7,{x:16,onComplete:function(){t.spAnim2()}})},t.prototype.spAnim2=function(){var t=this;TweenMax.killTweensOf(this._bar),TweenMax.killTweensOf(this._line),TweenMax.set(this._line,{marginLeft:"0px",opacity:0}),TweenMax.to(this._line,.7,{x:-16,opacity:.4}),TweenMax.to(this._bar,.7,{x:-16,onComplete:function(){t.spAnim1()}})},t.prototype.enterFrame=function(){if(this._wait++,this._wait>=230){this._wait=0,_main.removeEnterFrame(this),TweenMax.killTweensOf(this._bar),"PC"!==_main._device&&TweenMax.killTweensOf(this._line);var t=this;TweenMax.to(this._wrapper,.8,{opacity:0,onComplete:function(){TweenMax.set(t._wrapper,{display:"none"}),document.body.removeChild(t._wrapper)}})}},t}(),InfoSet=function(){"use strict";function t(){this._data=_main._parts.getJson("json/item.json"),this._key=["BAG&SLG","SCARVES","JEWELRY","WEAR","LIFESTYLE","FABRICS"]}return t.prototype.getData=function(t,e){return this._data[this._key[t]][e]},t}(),LoadingSet=function(){"use strict";function t(){"PC"===_main._device?this.initPC():this.initSP()}return t.prototype.initSP=function(){var t=this;this._spSound=document.getElementById("sound-set-sp"),this._spSoundOn=document.getElementById("sound-on"),this._spSoundOff=document.getElementById("sound-off"),TweenMax.set(this._spSound,{display:"block",scale:1.2,opacity:0}),TweenMax.to(this._spSound,.8,{ease:Power3.easeOut,scale:1,opacity:1,delay:1,onComplete:function(){t.spSoundEvent()}})},t.prototype.spSoundEvent=function(){this.isSpSound=!0;var t=this;this._spSoundOn.addEventListener("click",function(){t.isSpSound&&(t.isSpSound=!1,t.clearSpSound(),_main._sound.loadFile())}),this._spSoundOff.addEventListener("click",function(){t.isSpSound&&(t.isSpSound=!1,t.clearSpSound())})},t.prototype.clearSpSound=function(){var t=this;TweenMax.to(this._spSound,.8,{ease:Power3.easeOut,scale:.85,opacity:0,onComplete:function(){t._spSound.style.display="none",document.body.removeChild(t._spSound),t.initPC()}})},t.prototype.initPC=function(){this._parentWrapper=document.getElementById("world-wrapper"),this._wrapper=document.getElementById("loading"),this._logo=document.getElementById("op-logo"),this._txt=document.getElementById("op-txt"),this._loading_t=document.getElementById("loading-txt"),this._loadRing=document.getElementById("op-loader"),this._loadRingIn=document.getElementById("op-loader-image"),this._bg=document.getElementById("loading-bg"),this._enter=document.getElementById("op-enter"),this._line1=document.getElementById("op-1"),this._line2=document.getElementById("op-2"),this._line3=document.getElementById("op-3"),TweenMax.set(this._line1,{opacity:0}),TweenMax.set(this._line2,{opacity:0}),TweenMax.set(this._line3,{opacity:0}),TweenMax.to(this._loading_t,1,{ease:Power3.easeOut,opacity:.6,delay:.6}),TweenMax.to(this._loadRing,1,{ease:Power3.easeOut,opacity:.6,delay:.6}),TweenMax.set(this._loadRing,{rotation:0}),TweenMax.to(this._loadRing,.5,{rotation:360,repeat:-1}),TweenMax.set(this._logo,{scale:1.2,opacity:0}),TweenMax.to(this._logo,1,{ease:Power3.easeOut,scale:1,opacity:1,delay:.5,onComplete:function(){_main.partsLoadStart()}})},t.prototype.loadComp=function(){var t=this;TweenMax.to(this._loading_t,.5,{opacity:0,onComplete:function(){TweenMax.set(t._loading_t,{display:"none"})}}),TweenMax.killTweensOf(this._loadRing),TweenMax.killTweensOf(this._loadRingIn),TweenMax.to(this._loadRing,.5,{opacity:0,onComplete:function(){TweenMax.set(t._loadRing,{display:"none"})}}),_main._device,TweenMax.to(this._logo,2,{ease:Power3.easeIn,top:"20%",opacity:0,delay:0,onComplete:function(){TweenMax.set(t._logo,{display:"none"})}}),TweenMax.set(this._txt,{display:"block",y:"100px"}),_main._device,TweenMax.to(this._txt,1.5,{ease:Power3.easeOut,y:"0px",opacity:1,delay:2}),TweenMax.set(this._line1,{opacity:0}),TweenMax.set(this._line2,{opacity:0}),TweenMax.set(this._line3,{opacity:0}),TweenMax.to(this._line1,.7,{opacity:1,delay:2.2}),TweenMax.to(this._line2,.7,{opacity:1,delay:2.4}),TweenMax.to(this._line3,.7,{opacity:1,delay:2.6}),TweenMax.to(this._bg,1,{opacity:0,delay:2,onComplete:function(){TweenMax.set(t._bg,{display:"none"})}}),_main._world._opening.firstView(),_main._sound.startCheck()},t.prototype.setPartsNum=function(t,e){var i,s=Math.floor(e/t*100);i=s<10?"0"+s:s>=10&&s<100?s:"99",this._loading_t.innerHTML=String(i+"%")},t.prototype.showEnter=function(){var t=this;TweenMax.set(this._enter,{display:"block",opacity:0}),TweenMax.to(this._enter,.6,{ease:Power3.easeOut,opacity:1,delay:2});var e=$("#op-enter").children("div");TweenMax.killTweensOf(e[0]),TweenMax.killTweensOf(e[1]),TweenMax.killTweensOf(e[2]),TweenMax.killTweensOf(e[3]),TweenMax.set(e[0],{y:"100%"}),TweenMax.to(e[0],.2,{y:"0%",delay:2}),TweenMax.set(e[3],{x:"100%"}),TweenMax.to(e[3],.4,{ease:Power3.easeOut,x:"0%",delay:2.2}),TweenMax.set(e[2],{y:"-100%"}),TweenMax.to(e[2],.2,{y:"0%",delay:2}),TweenMax.set(e[1],{x:"-100%"}),TweenMax.to(e[1],.4,{ease:Power3.easeOut,x:"0%",delay:2.2,onComplete:function(){t.enterEvent()}})},t.prototype.enterEvent=function(){var t=this;"PC"===_main._device&&(this._enter.addEventListener("mouseenter",function(e){t.enterOver(e)},!1),this._enter.addEventListener("mouseleave",function(e){t.enterOut(e)},!1)),this._enter.addEventListener("click",function(e){t.enterClick(e)},!1)},t.prototype.enterOver=function(t){var e=$("#op-enter");TweenMax.to(e,.2,{ease:Power4.easeOut,backgroundColor:"rgba(255,255,255,0.2)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"100%"}),TweenMax.to(i[3],.15,{x:"100%",delay:.12}),TweenMax.to(i[2],.12,{y:"-100%"}),TweenMax.to(i[1],.15,{x:"-100%",delay:.12}))},t.prototype.enterOut=function(t){var e=$("#op-enter");TweenMax.to(e,.2,{backgroundColor:"rgba(255,255,255,0.0)"});var i=e.children("div");i.length<4||(TweenMax.killTweensOf(i[0]),TweenMax.killTweensOf(i[1]),TweenMax.killTweensOf(i[2]),TweenMax.killTweensOf(i[3]),TweenMax.to(i[0],.12,{y:"0%",delay:.15}),TweenMax.to(i[3],.15,{x:"0%"}),TweenMax.to(i[2],.12,{y:"0%",delay:.15}),TweenMax.to(i[1],.15,{x:"0%"}))},t.prototype.enterClick=function(){if(!($(this._enter).css("opacity")<1)){var t=this;TweenMax.to(this._wrapper,.3,{opacity:0,onComplete:function(){document.body.removeChild(t._wrapper)}}),_main._world._opening.clickEnter()}},t.prototype.waitFrame=function(){this._wait++,this._wait>=10&&(_main.removeEnterFrame(this),this._wrapper.style.display="none")},t}();